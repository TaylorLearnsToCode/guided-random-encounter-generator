"use strict";(self.webpackChunkguided_random_encounter_generator=self.webpackChunkguided_random_encounter_generator||[]).push([[34],{6034:(jt,P,p)=>{p.r(P),p.d(P,{ConfigureModule:()=>Xt});var m=p(6895),S=p(2342),R=p(4466),L=p(2636),e=p(8256),I=p(4229);let Q=(()=>{class n{constructor(){this.pageDisplayMode=L.L.SINGLE}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-landing"]],decls:4,vars:1,consts:[[3,"pageDisplayMode"]],template:function(t,r){1&t&&(e.TgZ(0,"greg-page-template",0)(1,"first-content")(2,"pre"),e._uU(3,"                                                                      .;.                                                                                                                                                                                                                                   \n                                                                   .;okl.                                                                                                                                                                                                                                   \n                                                                 .:::l;                                                                                                                                                                                                                                     \n                                                 ......''''''''';o; ,o,                                                                                                                                                        ,c,.                                                                         \n                                       ..',,,,,,,,;:ccllooooooolcl:,coc:'.                                                                                                                                                     ,dl;:'                                                                       \n                               ..',,,,,,;;::::;;,,,,,,,;clool;';::cc:,.''''''..                                                                                                                                                'o:.od:clllllllcccccc::::;;;,,,,,,'','...                                    \n                         ..,,,,,,,;;;;,,,,,,,,;;;;,. .,;,,'..   ...'''''''''''''''..                                                                                                                                        .,;clc:c:cc,;cllllllllcc::;;;;;;;;;::::loddolc:,,,,''...                        \n                    .',,,,,;;;,,,,,,'....',;,;;,,'';:;'       .:'    .,.  .'''''...''''...                                                                                                                              .,:ldoc;,,,,,.  .;:,,,,,,,,,,,,,,,,,,,,''....'',,;:cccloddddooc:;,...               \n                .,;,;;;;;,,,,,..   .,;;;;,..     ':;.        ;c.      .c;     ..''''....'''''..                                                                       .    .'. .;.                                  .,:lxdl:,.';.   '' .',,,,,..         ...'',,,,,,,,,'...........',;:codxxdoc:,'.         \n            .,;;:c:;,,,,..    .';;;;'.         .:;.         ;c.        .::.     .....''''....'''''..                                                            ,'...:o::c,co,'lo. ..                          .';coxdl;'.    ;c.   .::.    ..,,,,,..               ...',,,,,,,,,''...   ...,::loxxoc;'.    \n        .';:llc;,,'.      .';;;,..            ;c.          ;c.           ::.    .,,,,,....''''.....''''..                                                    ,;,lolldllxccxdol,cl,:oc;,                    .';coxoc;'.       'c.      ,c.        .',;;,'.                     ...',,,,,,,,,,,. ..;cok00o.   \n     .,codl:;,.        .';;;.               .c;.          'c.             ::.       .',;;,.  .'''''.....''''..                                          ...;:cldc:l:c:,,',;;cc;:,'lodd;.              .',;codl:,'.          .c'        'c'            .,;;,'.                          .',;;;,,,,,,,,,,.    \n   'lkxl;'.          '::,.                 .c,           .c,               ::           .';;;'.  ..''''..  ..''''..                                .'...:olddc:ol,..         .;:,cdldodc         .',,;cllc;,..             .c,          'c'               .';;;,.                 .,,,,,,'..                \n 'dko,.            ,:;.                   'c'            ;:                .c;              .,;;,.    ..''''..  ..''''....                ',,',llc,cxkOdl:oxc;'.               'dl;oocc.   ..',,,,;::;;,..                .c;            'c'                  .',;;,.         .,;;,'.                       \nld:.             .c;.                    .c'            .c'                 .c,                .';;,.      ..''''..  ........'....  ...,,:xkddk0Oodd::dxOkxl,..      ..''''..   'ol,.:l::;,,,'..,;;,'.                   .c:              'c'                     .',,,,'.  ':;'.                           \n;.              ,l'                     .c,             ,c.                  'c.                   .;;;.        ..''''..     ....'';dOkkkdcc;:ccc;;lxO0Odoolc;,,,,,,,lx:''',;;,. ;c.;o;ox;. .,;;,.   ...                .::                'c'               ..',,,,,,:ldo:cc.                              \n..''''''...    .:.                      ;c.             ::                    ;c.                     .,;;.          ..''''..       ..,;:,''..     .cl:;''',;;,...',,c:.  .  .';,,col:'',;:oxo;'',,,;clllc:.           .::                  'c.         .',,,,,'.........';;.                               \n;,''..'',,,,,,'.   ...'',,,,,,,,''...   .. .,,,,,,,,,'. ,;                    .c;                        .;;,.            ..''''..         ..';;.             ,odxdoc'.';ldol;,. .cx' .;cc:oxc,;:cc:;,,,;:oo,         .c;                    ,c.     .;;,'.                                                 \n             .,c:;,,,,''........'',,,,,,,;;;'.     ..,;;,...',,,,,,,,,,,,,..   ,c.                          ';:.               ..',;'.         ,c.          .,cc:'     ,:oddc;l' .;,,,;dxkOc:;,,,,'.                 .c,                      ;c. .;:,.                                                     \n               ...                     .,'             .,:;,'...       ...,;;,..:.    ....''',,,'''....       .:,                ..,co;.       .l'         .lxoxxc'    .,ccc;,,;,';co;'dxxo.                        'c'   ...',,,,,,,,,,,,,'...'';:'                                                        \n                                                                             ':c:;:cllc:;,''''''''',,,,;;,,'.              ..,,,,,,,,:ol;.    .::.     .'.....cxodl.            ';..;;.cl.                         'c:,,,,,,,'............'',,,,;,                                                          \n                                                                             .,oxxdoc:;,,,.           .;lloxkdc,.       .,;;,..        .,;;,,,:,     ,oc..::...;cc.    .;:'      .;,.,,.::'.................      '::,'.                                                                                    \n                                                                          .':lol:;,,,,,;,,::.     .':okOOO0KK000x:.  .;;,.      .',,.     ..'..     .;c'   .;;lxOd;,..;c:dkd;. .',';;.   'oo,,,,,,,,,,,,,,,,,,,;::,.                                                                                        \n                                                                         ;dxl;,..      .::'c;  ,lddollddc,'...''.,cc:;.      .,:;'...              ;:..';,.. ;dlxOccoldd;.,lkx:..','.    ,x;                  ..'                                                                                           \n                                                                       .dkl'.           .l;:doxxl,. 'c,           .,.       'c,.                  .c,   .',,,::;ox:codOOOd,..cxxl;,''''',co.                                                                                                                \n                                                                      .:;.             .c;'d0d;.   ;c.            .        'l'                    .oc'..      ....'lcloodkOd,.lOkkOOOkOXKd'                                                                                                                 \n                                                                                     .;:,,od,    .::.            ;:        ::                    .c;.,;;,,,,,'',,.:l'::.:llxOxdl.,ldOdoo;                                                                                                                   \n                                                                                  .,;;,,co;     .c,              ;c        c;                    ;c.     .........,c..c,.,c::okOkO0Kd.                                                                                                                      \n                                                                              .';;;,';oxc.     .c,             . 'c.       :c.                  .lc..             .c' .c, .;::;:xkdo'                                                                                                                       \n                                                                         .',,,,'..,;lko.      .c,  .;.        ;:..c;       :c.                 .c;.';,,,,''.......;l.  .c'  .;;;:.                                                                                                                          \n                                                                    .,,,,,,....,;;:cc,        :l.   ::       ,c.  ,c.     .c,                  ;c      ..'',,,,,,'cc    'c.                                                                                                                                 \n                                                                 .,:;'.   .,;;,'.,:,.       .;cl;   :o,.    'c'    ;;     .c,                .,l:.                ;c     ,c.                                                                                                                                \n                                                               .,:,.    ';;,..,;;'.      ';;l; 'l. .dO:    .c,   .;;..',',,l;              .;:,.':,.             .c;      ;c.                                                                                                                               \n                                                              .c;.  .,;ldc,,,,'.      .;;c;..;'::. ;Od.    ;:,,.'lkc.::,lc.;c.             ;:.   .,;;,,,...     .:;.       'c,                                                                                                                              \n                                                             .l,      ....        ..;;:;..,,,:ol. .ok:     'l:,:dol;,c..c. .l'             'c.       ..',,,,,';cc'          'c.                                                                                                                             \n                                                             .c;              .',:cc:'.'c;;;oo':;.;oo,    .l;.::.',:ldc;:. 'c.          ..  'c,.             ,c:.            ;c.                                                                                                                            \n                                                              .;:,....',,;;;:;::;;:c:c;,,.  .c;'cc::c,   .c:'c,     .';:c:'c:           'l'  .,;;,'..   ..';:cc;;'.          .c,                                                                                                                            \n                                                                 ';cdxxdddlcc:::;:;,'.       ,l..c;.::   ,c;c,         .c;;l'           .lo;,,,,:lddo;,,,,'.    .;c'          ,c.                                                                                                                           \n                                                                    ...'''......              ;c... ..   'cc,         .c, .c.           ;c. ..''....              ,c.         .c;                                                                                                                           \n                                                                                               'l'      ,c,.         ,c'  .c'          .c'                        .l;   .,,,'.'lx,  .'.                                                                                                                     \n                                                                                                ,c.     ::         .::.    c;          ;c.                      .'::.   ....,,'',coc;;oo.                                                                                                                   \n                                                                                                .c;     ,c.       ,:'     .cl.       ..l:                     .;:,.             .:ol::cll;'.                                                                                                                \n                                                                                                 .l.    .c'    ';cl.    .;;,c:..'. .,;:dd:,,,,,;;;;.          :c. .,,''',,,;c; .cdo;:l. ..cc.                                                                                                               \n                                                                                                  :c...''cc.  ,olc;.  .;:.  .:l;'.   ,:;ol'''',:;.:l.         'l'.lOc'.....:xl.;k0dco;  .;:,                                                                                                                \n                                                                                                 .c:..,'..';;.,o:.',  ::.   .:c.     ;:.'oc;,,,;dolx,          :xoxo.      ,O0dlxdcO0c.'c,                                                                                                                  \n                                                                                                .c:.... .c:..l:,:;;,,;;..,;:do..;;.',co'.l:    'dxo;            ,:ll.      ,c;.;dxOOxxd:.                                                                                                                   \n                                                                                                'l..lxl.,0O;,c'   ...   :c.,ll:'.:Ok;.cocdd.   .:,.                             ..;:,'.                                                                                                                     \n                                                                                                 'coxc:oxKKkl.          .c';d;'lddooc. ;ldc.                                                                                                                                                                \n                                                                                                  .cd,.;ddc,             :dldo,';;,;;.   .                                                                                                                                                                  \n                                                                                                                         .;ccoo'                                                                                                                                                                            \n                                                                                                                            ..                                                                                                                                                                              \n"),e.qZA()()()),2&t&&e.Q6J("pageDisplayMode",r.pageDisplayMode)},dependencies:[I.A],styles:["pre[_ngcontent-%COMP%]{font-size:6px}"]}),n})();var g=p(767),b=p(6132),C=p(1546),f=p(1581),_=p(4432),s=p(433),d=p(314);function l(n){if(n=(0,_.gK)(n)?n:"",Array.isArray(n))return function Y(n){const o=new s.vC([]);return n.forEach(t=>o.push(l(t))),o}(n);if(n instanceof Map){const o={};for(const t of n.keys())o[t]=n.get(t);return O(o)}return"object"!=typeof n||n instanceof Date?new s.NI(n):O(n)}function x(n,o,t){let r=-1;switch(o){case"up":r=n-1;break;case"down":r=n+1;break;default:(0,d._)(`Unsupported direction ${o} specified.`)}if(-1===r||r===t.controls.length)return;const i=t.at(n);t.removeAt(n),t.insert(r,i)}function O(n){const o=new s.cw({});return Object.keys(n).forEach(t=>o.addControl(t,l(n[t]))),o}var u=p(4004),T=p(2966);function G(n,o){1&n&&(e.ynx(0),e._UZ(1,"br"),e.BQk())}let h=(()=>{class n{set diceRolledForm(t){this._diceRolledForm=t}get diceRolledForm(){return(0,_.gK)(this._diceRolledForm)?this._diceRolledForm:(0,_.gK)(this.fromParentForm)&&(0,_.gK)(this.identifier)?this.fromParentForm.get(this.identifier):((0,d._)("Unable to determine dice rolling input property."),new s.cw({}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-dice-rolled-form"]],inputs:{diceRolledForm:"diceRolledForm",fromParentForm:"fromParentForm",identifier:"identifier",splitLines:"splitLines"},decls:9,vars:2,consts:[[3,"formGroup"],["formControlName","no","type","number"],["formControlName","pips","type","number"],[4,"ngIf"],["formControlName","modifier","type","number"],["formControlName","multiplier","type","number"]],template:function(t,r){1&t&&(e.ynx(0,0),e._UZ(1,"input",1),e._uU(2," D "),e._UZ(3,"input",2),e.YNc(4,G,2,0,"ng-container",3),e._uU(5," +/- "),e._UZ(6,"input",4),e._uU(7," x "),e._UZ(8,"input",5),e.BQk()),2&t&&(e.Q6J("formGroup",r.diceRolledForm),e.xp6(4),e.Q6J("ngIf",r.splitLines))},dependencies:[m.O5,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u],styles:["input[type=number][_ngcontent-%COMP%]{width:2em}"]}),n})(),N=(()=>{class n{set boundedRangeForm(t){this._boundedRangeForm=t}get boundedRangeForm(){return(0,_.gK)(this._boundedRangeForm)?this._boundedRangeForm:(0,_.gK)(this.fromParentForm)&&(0,_.gK)(this.identifier)?this.fromParentForm.get(this.identifier):((0,d._)("Unable to determine bounded range input"),new s.cw({}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-bounded-range-form"]],inputs:{boundedRangeForm:"boundedRangeForm",identifier:"identifier",fromParentForm:"fromParentForm"},decls:4,vars:1,consts:[[3,"formGroup"],["formControlName","low","type","number"],["formControlName","high","type","number"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e._UZ(1,"input",1),e._uU(2," - "),e._UZ(3,"input",2),e.qZA()),2&t&&e.Q6J("formGroup",r.boundedRangeForm)},dependencies:[s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u],styles:["input[type=number][_ngcontent-%COMP%]{width:2em}"]}),n})();const $=["magicItemTableImport"],K=["magicItemTableListImport"];function H(n,o){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=o.$implicit,r=e.oxw();e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",r.supportedSystem(t)," ")}}function D(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.ynx(1,20),e.TgZ(2,"div",21)(3,"a",10),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.shiftArticle(a,"up"))}),e._uU(4,"\u21d1"),e.qZA(),e.TgZ(5,"a",10),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.shiftArticle(a,"down"))}),e._uU(6,"\u21d3"),e.qZA()(),e._UZ(7,"greg-bounded-range-form",22),e.TgZ(8,"span"),e._UZ(9,"input",23),e.qZA(),e.TgZ(10,"a",10),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeReference(a))}),e._uU(11,"X"),e.qZA(),e.BQk(),e.qZA()}if(2&n){const t=o.index,r=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("boundedRangeForm",r.chanceOfForm(t))}}function B(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"section",18),e.YNc(2,D,12,2,"div",19),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.magicItemEntriesFormArray.controls)}}function X(n,o){1&n&&(e.TgZ(0,"div",24)(1,"p"),e._uU(2,"No entries assigned."),e.qZA(),e.TgZ(3,"p"),e._uU(4," Click "),e.TgZ(5,"a"),e._uU(6,"+"),e.qZA(),e._uU(7," on available items to add them as an entry result to this table. "),e.qZA()())}function W(n,o){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"hr"),e.TgZ(2,"a",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.fillChanceOf("high"))}),e._uU(3,"Fill High"),e.qZA(),e.TgZ(4,"a",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.fillChanceOf("low"))}),e._uU(5,"Fill Low"),e.qZA(),e.BQk()}}function j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addToForm(a))}),e._uU(2,"+"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Oqu(t.name)}}function V(n,o){if(1&n&&(e.ynx(0),e.YNc(1,j,5,1,"div",19),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function z(n,o){if(1&n&&(e.TgZ(0,"section",25),e.YNc(1,V,2,1,"ng-container",7),e.qZA()),2&n){const t=o.ngIf;e.oxw();const r=e.MAs(42);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function ee(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"a",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addToForm(a))}),e._uU(3,"+"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"a",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.editTable(a))}),e._uU(7,"\u270e"),e.qZA(),e.TgZ(8,"a",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.deleteTable(a))}),e._uU(9,"X"),e.qZA()(),e.BQk()}if(2&n){const t=o.$implicit,r=e.oxw(3);e.xp6(1),e.Q6J("ngClass",r.isNestable(t)),e.xp6(4),e.AsE(" ",t.name," ( ",t.system," ) ")}}function te(n,o){if(1&n&&(e.TgZ(0,"section",31),e.YNc(1,ee,10,3,"ng-container",19),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function ne(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"section",26),e.YNc(1,te,2,1,"section",27),e.TgZ(2,"section",28)(3,"a",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.importTables())}),e._uU(4,"Import List"),e.qZA(),e.TgZ(5,"input",29,30),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onMagicItemTableListImport())}),e.qZA(),e.TgZ(7,"a",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.exportTables())}),e._uU(8,"Export List"),e.qZA(),e.TgZ(9,"a",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearTables())}),e._uU(10,"Clear List"),e.qZA()()()}if(2&n){const t=o.ngIf;e.oxw();const r=e.MAs(42);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function re(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"None loaded."),e.qZA())}let oe=(()=>{class n{chanceOfForm(t){return this.magicItemEntriesFormArray.controls[t].get("chanceOf")}get diceToRollForm(){return this.magicItemTableForm.get("diceToRoll")}get magicItemEntriesFormArray(){return this.magicItemTableForm.get("entries")}supportedSystem(t){return this.SUPPORTED_SYSTEMS[t]}get supportedSystemKeys(){return Object.keys(this.SUPPORTED_SYSTEMS)}get magicItemTableImport(){return this.magicItemTableImportRef.nativeElement}get magicItemTableListImport(){return this.magicItemTableListImportRef.nativeElement}constructor(t){this.dataService=t,this.PERSISTENCE_TYPES=g.$,this.SUPPORTED_SYSTEMS=b.B,this.MAGIC_ITEM_TABLE=this.PERSISTENCE_TYPES.magicItemTable}ngOnInit(){this.magicItemTables$=this.dataService.dataState$.pipe((0,u.U)(t=>[...t.magicItemTables,...t.treasureMaps])),this.magicItems$=this.dataService.dataState$.pipe((0,u.U)(t=>t.magicItems)),this.clearForm()}addToForm(t){const r=(0,_.gK)(t.entries)?this.PERSISTENCE_TYPES.magicItemTable:this.PERSISTENCE_TYPES.magicItem;r===this.PERSISTENCE_TYPES.magicItemTable&&t.name===this.magicItemTableForm.value.name&&t.system==this.magicItemTableForm.value.system&&(0,d._)("Cannot nest a table in itself!");const i=l(new f.b({reference:t.name,persistenceType:r}));i.get("reference")?.disable(),this.magicItemEntriesFormArray.push(i)}clearForm(){this.magicItemTableForm=l(new C.X)}clearTables(){this.dataService.clear(this.PERSISTENCE_TYPES.magicItemTable)}deleteTable(t){this.dataService.delete(t,this.PERSISTENCE_TYPES.magicItemTable)}editTable(t){this.enableDisableFormEntries("enable"),this.magicItemTableForm=l(new C.X(t)),this.enableDisableFormEntries("disable")}exportMagicItemTable(){this.enableDisableFormEntries("enable"),this.dataService.exportObject(this.magicItemTableForm.value,`${this.magicItemTableForm.value.system}-${this.magicItemTableForm.value.name}`,this.PERSISTENCE_TYPES.magicItemTable.toUpperCase()),this.enableDisableFormEntries("disable")}exportTables(){this.dataService.exportFromStorage(this.PERSISTENCE_TYPES.magicItemTable)}fillChanceOf(t){let r,i;"low"!==t&&"high"!==t&&(0,d._)(`Invalid chance of side ${t} specified.`);for(let a=0;a<this.magicItemEntriesFormArray.controls.length;a++)if("low"!==t||0!==a)if("high"!==t||a!=this.magicItemEntriesFormArray.controls.length-1)i=this.chanceOfForm(a).get(t),r="low"===t?this.chanceOfForm(a-1).get("high"):this.chanceOfForm(a+1).get("low"),i.setValue("low"===t?r.value+1:r.value-1);else{const c=this.magicItemTableForm.value.diceToRoll.pips;this.chanceOfForm(a).get(t)?.setValue(c)}else this.chanceOfForm(a).get(t)?.setValue(1)}hasEntries(){return this.magicItemEntriesFormArray.controls.length>0}importMagicItemTable(){this.magicItemTableImport.click()}importTables(){this.magicItemTableListImport.click()}isNestable(t){return t.name===this.magicItemTableForm.value.name&&t.system==this.magicItemTableForm.value.system?["not-nestable","list-item"]:["list-item"]}onMagicItemTableImport(){this.magicItemTableImport.files?.length&&this.dataService.import(this.magicItemTableImport.files[0]).subscribe(t=>{this.enableDisableFormEntries("enable"),this.magicItemTableForm=l(new C.X(t)),this.magicItemTableImport.value="",this.enableDisableFormEntries("disable")})}onMagicItemTableListImport(){this.magicItemTableListImport.files?.length&&(this.enableDisableFormEntries("enable"),this.dataService.import(this.magicItemTableListImport.files[0],this.PERSISTENCE_TYPES.magicItemTable),this.enableDisableFormEntries("disable"))}removeReference(t){this.magicItemEntriesFormArray.removeAt(t)}saveTable(){this.enableDisableFormEntries("enable"),this.dataService.persist(this.PERSISTENCE_TYPES.magicItemTable,this.magicItemTableForm.value),this.enableDisableFormEntries("disable")}shiftArticle(t,r){x(t,r,this.magicItemEntriesFormArray)}enableDisableFormEntries(t){this.magicItemEntriesFormArray.controls.forEach(r=>{switch(t){case"enable":r.get("reference")?.enable();break;case"disable":r.get("reference")?.disable();break;default:(0,d._)(`Unsupported option ${t} specified.`)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-magic-item-table"]],viewQuery:function(t,r){if(1&t&&(e.Gf($,5),e.Gf(K,5)),2&t){let i;e.iGM(i=e.CRH())&&(r.magicItemTableImportRef=i.first),e.iGM(i=e.CRH())&&(r.magicItemTableListImportRef=i.first)}},decls:43,vars:13,consts:[[3,"formGroup"],[1,"table-metadata"],["formControlName","name","type","text"],["formControlName","system"],["disabled","","value",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"diceRolledForm"],[4,"ngIf","ngIfElse"],["noEntries",""],[1,"table-controls"],[3,"click"],["type","file",3,"accept","change"],["magicItemTableImport",""],[4,"ngIf"],["class","magic-items",4,"ngIf"],["class","magic-item-tables",4,"ngIf"],["noneLoaded",""],[3,"ngValue"],["formArrayName","entries",1,"table-entries"],[4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"reposition"],[3,"boundedRangeForm"],["formControlName","reference","type","text"],[1,"table-entries"],[1,"magic-items"],[1,"magic-item-tables"],["class","list",4,"ngIf","ngIfElse"],[1,"controls"],["accept",".GREG-CONFIG","type","file",3,"change"],["magicItemTableListImport",""],[1,"list"],[3,"ngClass"],[1,"edit-pencil",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"greg-page-template")(1,"first-content")(2,"form",0)(3,"section",1)(4,"label"),e._uU(5,"Name:"),e.qZA(),e._UZ(6,"input",2),e.TgZ(7,"label"),e._uU(8,"System:"),e.qZA(),e.TgZ(9,"select",3)(10,"option",4),e._uU(11,"-- Select --"),e.qZA(),e.YNc(12,H,2,2,"option",5),e.qZA(),e.TgZ(13,"label"),e._uU(14,"Dice to Roll:"),e.qZA(),e._UZ(15,"greg-dice-rolled-form",6),e.qZA(),e.YNc(16,B,3,1,"ng-container",7),e.YNc(17,X,8,0,"ng-template",null,8,e.W1O),e.TgZ(19,"section",9)(20,"div")(21,"a",10),e.NdJ("click",function(){return r.saveTable()}),e._uU(22,"Save Table"),e.qZA(),e.TgZ(23,"a",10),e.NdJ("click",function(){return r.importMagicItemTable()}),e._uU(24,"Import Table"),e.qZA(),e.TgZ(25,"input",11,12),e.NdJ("change",function(){return r.onMagicItemTableImport()}),e.qZA(),e.TgZ(27,"a",10),e.NdJ("click",function(){return r.exportMagicItemTable()}),e._uU(28,"Export Table"),e.qZA(),e.TgZ(29,"a",10),e.NdJ("click",function(){return r.clearForm()}),e._uU(30,"Clear"),e.qZA(),e.YNc(31,W,6,0,"ng-container",13),e.qZA()()()(),e.TgZ(32,"second-content")(33,"label"),e._uU(34,"Magic Items"),e.qZA(),e.YNc(35,z,2,2,"section",14),e.ALo(36,"async"),e.TgZ(37,"label"),e._uU(38,"Saved Tables"),e.qZA(),e.YNc(39,ne,11,2,"section",15),e.ALo(40,"async"),e.YNc(41,re,2,0,"ng-template",null,16,e.W1O),e.qZA()()),2&t){const i=e.MAs(18);e.xp6(2),e.Q6J("formGroup",r.magicItemTableForm),e.xp6(10),e.Q6J("ngForOf",r.supportedSystemKeys),e.xp6(3),e.Q6J("diceRolledForm",r.diceToRollForm),e.xp6(1),e.Q6J("ngIf",r.hasEntries())("ngIfElse",i),e.xp6(9),e.MGl("accept",".",r.MAGIC_ITEM_TABLE,""),e.xp6(6),e.Q6J("ngIf",r.hasEntries()),e.xp6(4),e.Q6J("ngIf",e.lcZ(36,9,r.magicItems$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(40,11,r.magicItemTables$))}},dependencies:[m.mk,m.sg,m.O5,I.A,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,h,N,m.Ov],styles:['input[type=number][_ngcontent-%COMP%]{width:2em}input[type=file][_ngcontent-%COMP%]{visibility:hidden;position:absolute}div.not-nestable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{visibility:hidden}div.not-nestable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic}div.reposition[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center;transform:translateY(.3em)}div.reposition[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:0}first-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-areas:"meta meta" "list controls";padding-bottom:.5em}form[_ngcontent-%COMP%]   section.table-metadata[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-area:meta;grid-template-columns:repeat(2,1fr 2fr);column-gap:1em;margin:.5em 0}second-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:1em}second-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}section.magic-items[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left;max-height:40vh;overflow-y:scroll}section.magic-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr;margin-top:.3em}section.magic-item-tables[_ngcontent-%COMP%]{max-height:40vh;overflow-y:scroll}section.magic-item-tables[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr 1.5em 1.5em;margin-top:.3em}section.magic-item-tables[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .edit-pencil[_ngcontent-%COMP%]{transform:translateY(-.2em)}section.magic-item-tables[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{text-align:center}section.magic-item-tables[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 2em}section.magic-item-tables[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left;column-gap:1em}section.table-controls[_ngcontent-%COMP%]{grid-area:controls;text-align:center}section.table-controls[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center}section.table-entries[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 6em 1fr 1em;padding:.3em 0}.table-entries[_ngcontent-%COMP%]{grid-area:list}']}),n})();var E=p(8265);const ie=["magicItemImport"],ae=["magicItemListImport"];function se(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"a",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.editMagicItem(a))}),e._uU(2,"\u270e"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"a",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.deleteMagicItem(a))}),e._uU(6,"X"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Oqu(t.name)}}function ce(n,o){if(1&n&&(e.ynx(0),e.YNc(1,se,7,1,"div",16),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function le(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"No magic items have been configured."),e.qZA())}function me(n,o){if(1&n&&(e.TgZ(0,"section",13),e.YNc(1,ce,2,1,"ng-container",14),e.YNc(2,le,2,0,"ng-template",null,15,e.W1O),e.qZA()),2&n){const t=o.ngIf,r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}let pe=(()=>{class n{get diceRolledForm(){return this.magicItemForm.get("diceRolled")}get magicItemImport(){return this.magicItemImportRef.nativeElement}get magicItemListImport(){return this.magicItemListImportRef.nativeElement}get quantityForm(){return this.magicItemForm.get("quantity")}constructor(t){this.dataService=t,this.PERSISTENCE_TYPES=g.$,this.MAGIC_ITEM=g.$.magicItem.toUpperCase()}ngOnInit(){this.clearForm(),this.magicItemList$=this.dataService.dataState$.pipe((0,u.U)(t=>t.magicItems))}clearForm(){this.magicItemForm=l(new E.Z)}clearMagicItemList(){this.dataService.clear(this.PERSISTENCE_TYPES.magicItem)}deleteMagicItem(t){this.dataService.delete(t,this.PERSISTENCE_TYPES.magicItem)}editMagicItem(t){this.magicItemForm=l(new E.Z(t))}exportMagicItem(){this.dataService.exportObject(this.magicItemForm.value,this.magicItemForm.value.name,this.PERSISTENCE_TYPES.magicItem.toUpperCase())}exportMagicItemList(){this.dataService.exportFromStorage(this.PERSISTENCE_TYPES.magicItem)}importMagicItem(){this.magicItemImport.click()}importMagicItemList(){this.magicItemListImport.click()}onMagicItemImport(){this.magicItemImport.files?.length?(this.dataService.import(this.magicItemImport.files[0]).subscribe(t=>{this.magicItemForm=l(new E.Z(t))}),this.magicItemImport.value=""):(0,d._)("No magic item type import file found.")}onMagicItemListImport(){this.magicItemListImport.files?.length?(this.dataService.import(this.magicItemListImport.files[0],this.PERSISTENCE_TYPES.magicItem),this.magicItemListImport.value=""):(0,d._)("No magic item list type import file found.")}saveItem(){this.dataService.persist(g.$.magicItem,this.magicItemForm.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-magic-item"]],viewQuery:function(t,r){if(1&t&&(e.Gf(ie,5),e.Gf(ae,5)),2&t){let i;e.iGM(i=e.CRH())&&(r.magicItemImportRef=i.first),e.iGM(i=e.CRH())&&(r.magicItemListImportRef=i.first)}},decls:47,vars:7,consts:[[3,"formGroup"],["formControlName","name","type","text"],[3,"diceRolledForm"],["formControlName","chanceOf","type","number"],["formControlName","notes"],[1,"form-controls"],[3,"click"],["type","file",3,"accept","change"],["magicItemImport",""],["class","magic-items",4,"ngIf"],[1,"list-controls"],["accept",".GREG-CONFIG","type","file",3,"change"],["magicItemListImport",""],[1,"magic-items"],[4,"ngIf","ngIfElse"],["noItems",""],["class","item-list",4,"ngFor","ngForOf"],[1,"item-list"]],template:function(t,r){1&t&&(e.TgZ(0,"greg-page-template")(1,"first-content")(2,"form",0)(3,"div")(4,"label"),e._uU(5,"Name:"),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"input",1),e.qZA(),e.TgZ(8,"label"),e._uU(9,"Quantity:"),e.qZA(),e._UZ(10,"greg-dice-rolled-form",2),e.TgZ(11,"label"),e._uU(12,"Chance Of:"),e.qZA(),e._UZ(13,"input",3),e.TgZ(14,"label"),e._uU(15,"...on:"),e.qZA(),e._UZ(16,"greg-dice-rolled-form",2),e.qZA(),e.TgZ(17,"section")(18,"span")(19,"label"),e._uU(20,"Notes, Function, or Description:"),e.qZA(),e._UZ(21,"textarea",4),e.qZA(),e.TgZ(22,"span",5)(23,"a",6),e.NdJ("click",function(){return r.saveItem()}),e._uU(24,"Save Magic Item"),e.qZA(),e.TgZ(25,"a",6),e.NdJ("click",function(){return r.importMagicItem()}),e._uU(26,"Import Magic Item"),e.qZA(),e.TgZ(27,"input",7,8),e.NdJ("change",function(){return r.onMagicItemImport()}),e.qZA(),e.TgZ(29,"a",6),e.NdJ("click",function(){return r.exportMagicItem()}),e._uU(30,"Export Magic Item"),e.qZA(),e.TgZ(31,"a",6),e.NdJ("click",function(){return r.clearForm()}),e._uU(32,"Clear Form"),e.qZA()()()()(),e.TgZ(33,"second-content")(34,"label"),e._uU(35,"Saved Items"),e.qZA(),e.YNc(36,me,4,2,"section",9),e.ALo(37,"async"),e.TgZ(38,"section",10)(39,"a",6),e.NdJ("click",function(){return r.importMagicItemList()}),e._uU(40,"Import List"),e.qZA(),e.TgZ(41,"input",11,12),e.NdJ("change",function(){return r.onMagicItemListImport()}),e.qZA(),e.TgZ(43,"a",6),e.NdJ("click",function(){return r.exportMagicItemList()}),e._uU(44,"Export List"),e.qZA(),e.TgZ(45,"a",6),e.NdJ("click",function(){return r.clearMagicItemList()}),e._uU(46,"Clear List"),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.magicItemForm),e.xp6(8),e.Q6J("diceRolledForm",r.quantityForm),e.xp6(6),e.Q6J("diceRolledForm",r.diceRolledForm),e.xp6(11),e.MGl("accept",".",r.MAGIC_ITEM,""),e.xp6(9),e.Q6J("ngIf",e.lcZ(37,5,r.magicItemList$)))},dependencies:[m.sg,m.O5,I.A,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,h,m.Ov],styles:["input[type=number][_ngcontent-%COMP%]{width:2em}input[type=file][_ngcontent-%COMP%]{visibility:hidden;position:absolute}div.item-list[_ngcontent-%COMP%]{align-items:center;column-gap:1em;display:grid;grid-template-columns:1em 1fr 1em}form[_ngcontent-%COMP%]{padding:.5em 0}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr 2fr);margin-bottom:.3em;row-gap:.3em}form[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;width:90%}section.list-controls[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center}section.magic-items[_ngcontent-%COMP%]{margin-top:.5em;max-height:67vh;overflow-y:scroll}span.form-controls[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center;padding-top:1em}"]}),n})();var w=p(5042);class A{constructor(o){this.name="",this.quantity=new w.K,this.system="",(0,_.EO)(this,o)}}var y=p(6530);class v{constructor(o){this.type="",this.entries=[],this.system="",o?.entries?.length&&(o.entries=o.entries.map(t=>new y.y(t))),(0,_.EO)(this,o)}}class U extends A{constructor(o){super(),this.pctChance=100,this.every=0,(0,_.EO)(this,o)}}class q extends A{constructor(o){super(),this.incChance=100,this.each=0,(0,_.EO)(this,o)}}class F extends A{constructor(o){super(),this.consorts=[],this.pctInLair=0,this.quantityInLair=new w.K,this.retinue=[],this.treasureType="",this.treasurePerCap=[],(0,_.EO)(this,o),this.handleConsorts(),this.handleRetinue(),this.handleTreasurePerCap()}handleConsorts(){this.consorts=this.consorts.map(o=>new U(o))}handleRetinue(){this.retinue=this.retinue.map(o=>new q(o))}handleTreasurePerCap(){this.treasurePerCap=this.treasurePerCap.map(o=>(0,_.gK)(o.entries)?new v(o):new y.y(o))}}const _e=["importTableInput"];function ge(n,o){if(1&n&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&n){const t=o.$implicit,r=e.oxw();e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",r.supportedSystem(t)," ")}}function ue(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"span",20)(2,"a",11),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.shiftEntry(a,"up"))}),e._uU(3,"\u21d1"),e.qZA(),e.TgZ(4,"a",11),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.shiftEntry(a,"down"))}),e._uU(5,"\u21d3"),e.qZA()(),e._UZ(6,"greg-bounded-range-form",21),e._uU(7),e.TgZ(8,"a",11),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeEntry(a))}),e._uU(9,"X"),e.qZA()()}if(2&n){const t=o.index,r=e.oxw(2);e.xp6(6),e.Q6J("boundedRangeForm",r.boundedRangeForm(t)),e.xp6(1),e.hij(" ",r.entryName(t)," ")}}function de(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ue,10,2,"div",19),e.TgZ(2,"p"),e._uU(3," To assign multiple results, assign those multiple rows the same Chance Of range. "),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.entriesFormArray.controls)}}function fe(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"No rollable entries configured."),e.qZA())}function Te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"a",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.nestTable(a))}),e._uU(2,"+Add"),e.qZA(),e.TgZ(3,"span",20)(4,"a",11),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(3);return e.KtG(c.shiftTable(a,"up"))}),e._uU(5,"\u21d1"),e.qZA(),e.TgZ(6,"a",11),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(3);return e.KtG(c.shiftTable(a,"down"))}),e._uU(7,"\u21d3"),e.qZA()(),e.TgZ(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"a",26),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.editSavedTable(a))}),e._uU(11,"\u270e"),e.qZA(),e.TgZ(12,"a",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.deleteSavedTable(a))}),e._uU(13,"X"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(9),e.AsE(" ",t.name," ( ",t.system," ) ")}}function Ce(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Te,14,2,"div",24),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function ye(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"section",22),e.YNc(1,Ce,2,1,"ng-container",8),e.TgZ(2,"div",23)(3,"a",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSavedTables())}),e._uU(4,"Clear"),e.qZA()()()}if(2&n){const t=o.ngIf,r=e.oxw(),i=e.MAs(57);e.Q6J("ngClass",r.savedTableClasses),e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",i)}}function he(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"No tables currently configured."),e.qZA())}const ve=[[["add-entry-form"]]],Ie=["add-entry-form"];let Z=(()=>{class n{set entryIdentifier(t){this._entryIdentifier=t}get entryIdentifier(){return(0,_.gK)(this._entryIdentifier)?this._entryIdentifier:"name"}set entriesNestable(t){this._entriesNestable=t}get entriesNestable(){return!(0,_.gK)(this._entriesNestable)||this._entriesNestable}get acceptFileType(){return this.persistenceType?`.${this.persistenceType}`:"*"}boundedRangeForm(t){return this.entriesFormArray.controls[t].get("chanceOf")}get entriesFormArray(){return this.tableForm.get("entries")}entryName(t){return this.entriesFormArray.value[t][this.entryIdentifier]}get savedTableClasses(){return["saved-tables",this.entriesNestable?"nestable":"not-nestable"]}supportedSystem(t){return this.SUPPORTED_SYSTEMS[t]}get supportedSystemKeys(){return Object.keys(this.SUPPORTED_SYSTEMS)}chanceOfForm(t){return this.entriesFormArray.controls[t].get("chanceOf")}get importTableInput(){return this.importTableInputRef.nativeElement}constructor(t){this.dataService=t,this.importEvent=new e.vpe,this.editSavedTableEvent=new e.vpe,this.nestSavedTable=new e.vpe,this.SUPPORTED_SYSTEMS=b.B,this.PERSISTENCE_TYPES=g.$}ngOnInit(){this.initializeSavedTableListStream()}clearSavedTables(){this.dataService.clear(this.persistenceType)}clearTableForm(){this.editSavedTableEvent.emit({})}deleteSavedTable(t){this.dataService.delete(t,this.persistenceType)}editSavedTable(t){this.editSavedTableEvent.emit(t)}exportFile(){this.dataService.exportObject(this.tableForm.value,`${this.tableForm.value.system}-${this.tableForm.value.name}`,this.persistenceType.toUpperCase())}fillChanceOf(t){let r,i;"low"!==t&&"high"!==t&&(0,d._)(`Invalid chance of side ${t} specified.`);for(let a=0;a<this.entriesFormArray.controls.length;a++)if("low"!==t||0!==a)if("high"!==t||a!=this.entriesFormArray.controls.length-1)i=this.chanceOfForm(a).get(t),r="low"===t?this.chanceOfForm(a-1).get("high"):this.chanceOfForm(a+1).get("low"),i.setValue("low"===t?r.value+1:r.value-1);else{const c=this.tableForm.value.diceToRoll.pips;this.chanceOfForm(a).get(t)?.setValue(c)}else this.chanceOfForm(a).get(t)?.setValue(1)}importFile(){this.importTableInput.click()}nestTable(t){this.nestSavedTable.emit(t)}onImportFile(){this.importTableInput.files?.length?this.dataService.import(this.importTableInput.files[0]).subscribe(t=>this.importEvent.emit(t)):(0,d._)("No file found for import.")}removeEntry(t){this.entriesFormArray.removeAt(t)}saveTableForm(){this.dataService.persist(this.persistenceType,this.tableForm.value)}shiftEntry(t,r){x(t,r,this.entriesFormArray)}shiftTable(t,r){this.dataService.shiftListEntry(this.persistenceType,t,r)}initializeSavedTableListStream(){const t=Object.keys(this.PERSISTENCE_TYPES).find(r=>this.PERSISTENCE_TYPES[r]===this.persistenceType)+"s";this.savedTableList$=this.dataService.dataState$.pipe((0,u.U)(r=>r[t]))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-rollable-table-template"]],viewQuery:function(t,r){if(1&t&&e.Gf(_e,5),2&t){let i;e.iGM(i=e.CRH())&&(r.importTableInputRef=i.first)}},inputs:{entryIdentifier:"entryIdentifier",entriesNestable:"entriesNestable",persistenceType:"persistenceType",tableForm:"tableForm"},outputs:{importEvent:"importEvent",editSavedTableEvent:"editSavedTableEvent",nestSavedTable:"nestSavedTable"},ngContentSelectors:Ie,decls:58,vars:9,consts:[[3,"formGroup"],[1,"form-head"],["formControlName","name","type","text"],["formControlName","system"],["disabled","","value",""],[3,"ngValue",4,"ngFor","ngForOf"],["identifier","diceToRoll",3,"fromParentForm"],[1,"form-entries"],[4,"ngIf","ngIfElse"],["noEntries",""],[1,"form-controls"],[3,"click"],[2,"padding-bottom","0.5em"],["type","file",3,"accept","change"],["importTableInput",""],[1,"add-entry-form"],[3,"ngClass",4,"ngIf"],["noTables",""],[3,"ngValue"],[4,"ngFor","ngForOf"],[1,"shift-entry"],[3,"boundedRangeForm"],[3,"ngClass"],[1,"saved-table-controls"],["class","saved-entry",4,"ngFor","ngForOf"],[1,"saved-entry"],[1,"edit-pencil",3,"click"]],template:function(t,r){if(1&t&&(e.F$t(ve),e.TgZ(0,"greg-page-template")(1,"first-content")(2,"form",0)(3,"section",1)(4,"label"),e._uU(5,"Name:"),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"input",2),e.qZA(),e.TgZ(8,"label"),e._uU(9,"System:"),e.qZA(),e.TgZ(10,"span")(11,"select",3)(12,"option",4),e._uU(13,"-- Select --"),e.qZA(),e.YNc(14,ge,2,2,"option",5),e.qZA()(),e.TgZ(15,"label"),e._uU(16,"Dice Pool:"),e.qZA(),e._UZ(17,"greg-dice-rolled-form",6),e.qZA(),e.TgZ(18,"section",7)(19,"label"),e._uU(20,"Entries"),e.qZA(),e.YNc(21,de,4,1,"ng-container",8),e.YNc(22,fe,2,0,"ng-template",null,9,e.W1O),e.qZA(),e.TgZ(24,"section",10)(25,"label"),e._uU(26,"Controls"),e.qZA(),e.TgZ(27,"ul")(28,"li")(29,"a",11),e.NdJ("click",function(){return r.importFile()}),e._uU(30,"Import"),e.qZA()(),e.TgZ(31,"li",12)(32,"a",11),e.NdJ("click",function(){return r.exportFile()}),e._uU(33,"Export"),e.qZA()(),e.TgZ(34,"li")(35,"a",11),e.NdJ("click",function(){return r.fillChanceOf("high")}),e._uU(36,"Fill High"),e.qZA()(),e.TgZ(37,"li",12)(38,"a",11),e.NdJ("click",function(){return r.fillChanceOf("low")}),e._uU(39,"Fill Low"),e.qZA()(),e.TgZ(40,"li")(41,"a",11),e.NdJ("click",function(){return r.saveTableForm()}),e._uU(42,"Save"),e.qZA()(),e.TgZ(43,"li")(44,"a",11),e.NdJ("click",function(){return r.clearTableForm()}),e._uU(45,"Clear"),e.qZA()()(),e.TgZ(46,"input",13,14),e.NdJ("change",function(){return r.onImportFile()}),e.qZA()()()(),e.TgZ(48,"second-content")(49,"section",15),e.Hsn(50),e.qZA(),e._UZ(51,"hr"),e.TgZ(52,"label"),e._uU(53,"Saved Tables"),e.qZA(),e.YNc(54,ye,5,3,"section",16),e.ALo(55,"async"),e.YNc(56,he,2,0,"ng-template",null,17,e.W1O),e.qZA()()),2&t){const i=e.MAs(23);e.xp6(2),e.Q6J("formGroup",r.tableForm),e.xp6(12),e.Q6J("ngForOf",r.supportedSystemKeys),e.xp6(3),e.Q6J("fromParentForm",r.tableForm),e.xp6(4),e.Q6J("ngIf",r.entriesFormArray.controls.length)("ngIfElse",i),e.xp6(25),e.Q6J("accept",r.acceptFileType),e.xp6(8),e.Q6J("ngIf",e.lcZ(55,7,r.savedTableList$))}},dependencies:[m.mk,m.sg,m.O5,I.A,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,h,N,m.Ov],styles:['input[type=file][_ngcontent-%COMP%]{visibility:hidden;position:absolute}first-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-areas:"top top" "left right";grid-template-columns:repeat(2,1fr)}first-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0 .5em}hr[_ngcontent-%COMP%]{margin-bottom:1em;margin-top:1em}second-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}section.add-entry-form[_ngcontent-%COMP%]{max-height:36vh;overflow-y:scroll}section.form-controls[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center;grid-area:right}section.form-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0}section.form-controls[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{justify-self:center;margin:0;padding:0}section.form-controls[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:1em}section.form-entries[_ngcontent-%COMP%]{grid-area:left}section.form-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 6em 1fr 1em;margin:.3em 0}section.form-entries[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}section.form-entries[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:small;font-style:italic;text-align:center}section.form-head[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-area:top;grid-template-columns:repeat(2,1fr 2fr);margin-bottom:1em}section.saved-tables[_ngcontent-%COMP%]{max-height:36vh;overflow-y:scroll}section.saved-tables[_ngcontent-%COMP%]   div.saved-entry[_ngcontent-%COMP%]{display:grid;row-gap:.4em;margin-bottom:.25em;margin-top:.25em}section.nestable[_ngcontent-%COMP%]   div.saved-entry[_ngcontent-%COMP%]{grid-template-columns:2.5em 1.5em 1fr 1.5em 1.5em}section.not-nestable[_ngcontent-%COMP%]   div.saved-entry[_ngcontent-%COMP%]{grid-template-columns:1.5em 1fr 1.5em 1.5em}section.saved-tables[_ngcontent-%COMP%]   div.saved-table-controls[_ngcontent-%COMP%]{text-align:center}section.saved-tables[_ngcontent-%COMP%]   div.saved-table-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 2em}']}),n})();function be(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addMonster(a))}),e._uU(2,"+Add"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Oqu(t.name)}}function Me(n,o){if(1&n&&(e.ynx(0),e.YNc(1,be,5,1,"div",5),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Ze(n,o){if(1&n&&(e.TgZ(0,"section",3),e.YNc(1,Me,2,1,"ng-container",4),e.qZA()),2&n){const t=o.ngIf;e.oxw();const r=e.MAs(7);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function xe(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"No monsters configured."),e.qZA())}let Ee=(()=>{class n{get monsterEntries(){return this.encounterForm.get("entries")}constructor(t){this.dataService=t,this.PERSISTENCE_TYPE=g.$.monsterEncounterList,this.PERSISTENCE_TYPES=g.$}ngOnInit(){this.resetForm(),this.savedMonsterList$=this.dataService.dataState$.pipe((0,u.U)(t=>{const r=t.monsterTypes.map(i=>new F(i));return(0,_.L1)(r),r}))}addMonster(t){this.monsterEntries.push(l(new f.b({reference:t.name,persistenceType:this.PERSISTENCE_TYPE})))}handleEditSavedTable(t){this.resetForm(t)}handleImport(t){this.resetForm(t)}handleNestSavedTable(t){this.monsterEntries.push(l(new f.b({reference:t.name,persistenceType:this.PERSISTENCE_TYPES.monsterEncounterList})))}resetForm(t){this.encounterForm=l(new C.X(t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-monster-encounter-list"]],decls:8,vars:5,consts:[["entryIdentifier","reference",3,"persistenceType","tableForm","editSavedTableEvent","importEvent","nestSavedTable"],["class","saved-monsters",4,"ngIf"],["noMonster",""],[1,"saved-monsters"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"greg-rollable-table-template",0),e.NdJ("editSavedTableEvent",function(a){return r.handleEditSavedTable(a)})("importEvent",function(a){return r.handleEditSavedTable(a)})("nestSavedTable",function(a){return r.handleNestSavedTable(a)}),e.TgZ(1,"add-entry-form")(2,"label"),e._uU(3,"Monster Types:"),e.qZA(),e.YNc(4,Ze,2,2,"section",1),e.ALo(5,"async"),e.YNc(6,xe,2,0,"ng-template",null,2,e.W1O),e.qZA()()),2&t&&(e.Q6J("persistenceType",r.PERSISTENCE_TYPE)("tableForm",r.encounterForm),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,3,r.savedMonsterList$)))},dependencies:[m.sg,m.O5,Z,m.Ov],styles:["add-entry-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}add-entry-form[_ngcontent-%COMP%]   section.saved-monsters[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left}add-entry-form[_ngcontent-%COMP%]   section.saved-monsters[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;column-gap:.5em;grid-template-columns:3em 1fr}"]}),n})();var Ae=p(7579),Fe=p(8505),Pe=p(4482),Se=p(5403),Oe=p(8421),Ne=p(5032),Ue=p(1466);const qe=["savedItemsImportInput"];function Je(n,o){if(1&n&&(e.TgZ(0,"option",10),e._uU(1),e.qZA()),2&n){const t=o.$implicit,r=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",r.supportedSystem(t)," ")}}function ke(n,o){if(1&n&&(e.TgZ(0,"div",21),e.Hsn(1,1),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngStyle",t.listContainerStyles)}}function Re(n,o){1&n&&e._UZ(0,"hr")}function Le(n,o){if(1&n&&(e.TgZ(0,"option",10),e._uU(1),e.qZA()),2&n){const t=o.$implicit,r=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",r.supportedSystem(t)," ")}}function Qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"span",23)(2,"a",7),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(3);return e.KtG(c.shiftEntry(a,"up"))}),e._uU(3,"\u21d1"),e.qZA(),e.TgZ(4,"a",7),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(3);return e.KtG(c.shiftEntry(a,"down"))}),e._uU(5,"\u21d3"),e.qZA()(),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.TgZ(8,"a",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.editSavedItem(a))}),e._uU(9,"\u270e"),e.qZA(),e.TgZ(10,"a",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.removeEntry(a))}),e._uU(11,"X"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(7),e.AsE(" ",t.name," (",t.system,") ")}}function Ye(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Qe,12,2,"div",22),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Ge(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"second-content"),e.YNc(1,ke,2,1,"div",11),e.YNc(2,Re,1,0,"hr",8),e.TgZ(3,"div",12)(4,"section",13)(5,"label"),e._uU(6,"Default System:"),e.qZA(),e.TgZ(7,"select",14),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onDefaultSystemSelect(i))}),e.TgZ(8,"option",4),e._uU(9,"-- Select --"),e.qZA(),e.YNc(10,Le,2,2,"option",5),e.qZA()(),e.TgZ(11,"label",15),e._uU(12,"Saved Items"),e.qZA(),e.TgZ(13,"section",16),e.YNc(14,Ye,2,1,"ng-container",17),e.qZA(),e.TgZ(15,"section",18)(16,"a",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.importSavedItems())}),e._uU(17,"Import"),e.qZA(),e.TgZ(18,"input",19,20),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onSavedItemImport())}),e.qZA(),e.TgZ(20,"a",7),e.NdJ("click",function(){const a=e.CHM(t).ngIf,c=e.oxw();return e.KtG(c.exportSavedItems(a))}),e._uU(21,"Export"),e.qZA(),e.TgZ(22,"a",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearSavedItems())}),e._uU(23,"Clear All"),e.qZA()()()()}if(2&n){const t=o.ngIf,r=e.oxw(),i=e.MAs(25);e.xp6(1),e.Q6J("ngIf",r.includeSupplementalList),e.xp6(1),e.Q6J("ngIf",r.includeSupplementalList),e.xp6(5),e.Q6J("ngModel",r.selectedSystem),e.xp6(3),e.Q6J("ngForOf",r.supportedSystemKeys),e.xp6(3),e.Q6J("ngStyle",r.listContainerStyles),e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",i),e.xp6(4),e.MGl("accept",".",r.persistenceType,"")}}function $e(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"None currently saved."),e.qZA())}const Ke=[[["supplemental-fields-form"]],[["supplemental-lists-form"]]],He=["supplemental-fields-form","supplemental-lists-form"];let De=(()=>{class n{set itemIdentifiers(t){this._itemIdentifiers=t}get itemIdentifiers(){return"".concat("system",(0,_.gK)(this._itemIdentifiers)?`,${this._itemIdentifiers}`:",name")}set quantityLabel(t){this._quantityLabel=t}get quantityLabel(){return(0,_.gK)(this._quantityLabel)?this._quantityLabel:"Quantity"}get supportedSystemKeys(){return Object.keys(this.SUPPORTED_SYSTEMS)}supportedSystem(t){return this.SUPPORTED_SYSTEMS[t]}get quantityForm(){return this.itemForm.get("quantity")}get savedItemsImportInput(){return this.savedItemsImportInputRef.nativeElement}constructor(t,r){this.appManagerService=t,this.dataService=r,this.editSavedItemEvent=new e.vpe,this.listContainerStyles={},this.SUPPORTED_SYSTEMS=b.B,this.destroySource=new Ae.x}ngOnInit(){this.savedItem$=this.dataService.dataState$.pipe((0,u.U)(t=>this.sortMonsterTypes(t.monsterTypes))),this.selectedSystem="",this.subscribeListContainerStyles()}ngOnDestroy(){this.destroySource.next()}clearItemForm(){this.editSavedItem({system:this.selectedSystem})}clearSavedItems(){this.dataService.clear(this.persistenceType)}editSavedItem(t){this.editSavedItemEvent.emit(t)}exportSavedItems(t){this.dataService.exportObject(t,this.persistenceType+"s",this.persistenceType.toUpperCase())}importSavedItems(){this.savedItemsImportInput.click()}onDefaultSystemSelect(t){this.selectedSystem=t.target.value,this.itemForm.get("system")?.setValue(this.selectedSystem)}onSavedItemImport(){this.savedItemsImportInput.files&&(this.dataService.import(this.savedItemsImportInput.files[0],this.persistenceType),this.savedItemsImportInput.value="")}saveItem(){this.dataService.persist(this.persistenceType,this.itemForm.value),this.clearItemForm()}removeEntry(t){this.dataService.delete(t,this.persistenceType,this.itemIdentifiers)}shiftEntry(t,r){this.dataService.shiftListEntry(this.persistenceType,t,r)}sortMonsterTypes(t){const r=t.map(i=>new F(i));return(0,_.L1)(r),r}subscribeListContainerStyles(){this.appManagerService.appComponentViewState$.pipe((0,Fe.b)(t=>{this.includeSupplementalList&&(this.listContainerStyles["max-height"]=`calc(${t.mainStyles["max-height"]} * .4)`,this.listContainerStyles["overflow-y"]="scroll")}),function we(n){return(0,Pe.e)((o,t)=>{(0,Oe.Xf)(n).subscribe((0,Se.x)(t,()=>t.complete(),Ne.Z)),!t.closed&&o.subscribe(t)})}(this.destroySource)).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ue.Y),e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-quantifiable-item-form-template"]],viewQuery:function(t,r){if(1&t&&e.Gf(qe,5),2&t){let i;e.iGM(i=e.CRH())&&(r.savedItemsImportInputRef=i.first)}},inputs:{itemIdentifiers:"itemIdentifiers",includeSupplementalList:"includeSupplementalList",itemForm:"itemForm",persistenceType:"persistenceType",quantityLabel:"quantityLabel"},outputs:{editSavedItemEvent:"editSavedItemEvent"},ngContentSelectors:He,decls:26,vars:7,consts:[[3,"formGroup"],["formControlName","name","type","text"],[3,"diceRolledForm"],["formControlName","system"],["disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"item-form-controls"],[3,"click"],[4,"ngIf"],["noItems",""],[3,"value"],["class","supplemental-lists",3,"ngStyle",4,"ngIf"],[1,"common-list"],[1,"default-system"],[3,"ngModel","change"],[1,"saved-items-label"],[1,"saved-items-list",3,"ngStyle"],[4,"ngIf","ngIfElse"],[1,"saved-items-controls"],["type","file",3,"accept","change"],["savedItemsImportInput",""],[1,"supplemental-lists",3,"ngStyle"],[4,"ngFor","ngForOf"],[1,"shift-entry"],[1,"edit-pencil",3,"click"]],template:function(t,r){1&t&&(e.F$t(Ke),e.TgZ(0,"greg-page-template")(1,"first-content")(2,"form",0)(3,"label"),e._uU(4,"Name:"),e.qZA(),e._UZ(5,"input",1),e.TgZ(6,"label"),e._uU(7),e.qZA(),e._UZ(8,"greg-dice-rolled-form",2),e.TgZ(9,"label"),e._uU(10,"System:"),e.qZA(),e.TgZ(11,"select",3)(12,"option",4),e._uU(13,"-- Select --"),e.qZA(),e.YNc(14,Je,2,2,"option",5),e.qZA()(),e.Hsn(15),e._UZ(16,"hr"),e.TgZ(17,"section",6)(18,"a",7),e.NdJ("click",function(){return r.saveItem()}),e._uU(19,"Save"),e.qZA(),e.TgZ(20,"a",7),e.NdJ("click",function(){return r.clearItemForm()}),e._uU(21,"Clear"),e.qZA()()(),e.YNc(22,Ge,24,8,"second-content",8),e.ALo(23,"async"),e.qZA(),e.YNc(24,$e,2,0,"ng-template",null,9,e.W1O)),2&t&&(e.xp6(2),e.Q6J("formGroup",r.itemForm),e.xp6(5),e.hij("",r.quantityLabel,":"),e.xp6(1),e.Q6J("diceRolledForm",r.quantityForm),e.xp6(6),e.Q6J("ngForOf",r.supportedSystemKeys),e.xp6(8),e.Q6J("ngIf",e.lcZ(23,5,r.savedItem$)))},dependencies:[m.sg,m.O5,m.PC,I.A,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.On,s.sg,s.u,h,m.Ov],styles:['input[type=file][_ngcontent-%COMP%]{visibility:hidden;position:absolute}first-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;column-gap:1em;grid-template-columns:repeat(2,1fr 2fr)}hr[_ngcontent-%COMP%]{margin-bottom:1em;margin-top:1em}second-content[_ngcontent-%COMP%]   div.common-list[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr auto;grid-template-areas:"left right" "items items" "controls controls"}second-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}second-content[_ngcontent-%COMP%]   label.saved-items-label[_ngcontent-%COMP%]{grid-area:left}section.default-system[_ngcontent-%COMP%]{grid-area:right}section.default-system[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:.5em}section.item-form-controls[_ngcontent-%COMP%], section.saved-items-controls[_ngcontent-%COMP%]{text-align:center}section.item-form-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], section.saved-items-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 2em}section.saved-items-controls[_ngcontent-%COMP%]{grid-area:controls}section.saved-items-list[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left;column-gap:.5em;grid-area:items;row-gap:0}section.saved-items-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1.5em 1fr 1.5em 1.5em;margin:.25em 0}']}),n})();var M=p(7263);function Be(n,o){if(1&n&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&n){const t=o.$implicit,r=e.oxw(2);e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",r.articleValue(t)," ")}}function Xe(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Be,2,2,"option",13),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.articleTypeKeys)}}function We(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"span"),e._uU(2,"\u2022"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addToArticle(a))}),e._uU(4),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Oqu(t.name)}}function je(n,o){if(1&n&&(e.ynx(0),e.YNc(1,We,5,1,"div",17),e.BQk()),2&n){const t=o.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Ve(n,o){if(1&n&&(e.TgZ(0,"section",15)(1,"label"),e._uU(2,"Magic Item Lists"),e.qZA(),e.TgZ(3,"section",16),e.YNc(4,je,2,1,"ng-container",11),e.ALo(5,"async"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",e.lcZ(5,1,t.magicItemList$))}}let J=(()=>{class n{get articleTypeKeys(){return Object.keys(M.U).map(t=>t)}articleValue(t){return M.U[t]}get showMagicItemList(){return this.enableMagicItemHint&&"MAGIC_ITEM"==this.articleForm.get("type")?.value}constructor(t){this.dataService=t,this.removeArticleEvent=new e.vpe,this.shiftArticleEvent=new e.vpe}ngOnInit(){this.magicItemList$=this.dataService.dataState$.pipe((0,u.U)(t=>{const r=t.magicItemTables.map(i=>new C.X(i));return(0,_.L1)(r),r}))}addToArticle(t){this.articleForm.get("name")?.setValue(t.name)}removeArticle(){this.removeArticleEvent.emit()}shiftArticle(t){this.shiftArticleEvent.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-treasure-article-form"]],inputs:{articleForm:"articleForm",enableMagicItemHint:"enableMagicItemHint",isInCollection:"isInCollection"},outputs:{removeArticleEvent:"removeArticleEvent",shiftArticleEvent:"shiftArticleEvent"},decls:34,vars:5,consts:[[3,"formGroup"],[1,"shift-entry"],[3,"click"],[1,"name-quantity"],["formControlName","name","type","text"],["identifier","quantity",3,"fromParentForm"],[1,"chance-type"],["formControlName","chanceOf","type","number"],["identifier","diceRolled",3,"fromParentForm"],["formControlName","type"],["disabled","","value",""],[4,"ngIf"],["class","magic-item-list",4,"ngIf"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"magic-item-list"],[1,"saved-magic-items"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"a",2),e.NdJ("click",function(){return r.shiftArticle("up")}),e._uU(3,"\u21d1"),e.qZA(),e.TgZ(4,"a",2),e.NdJ("click",function(){return r.shiftArticle("down")}),e._uU(5,"\u21d3"),e.qZA()(),e.TgZ(6,"section")(7,"div",3)(8,"label"),e._uU(9,"Name:"),e.qZA(),e.TgZ(10,"span"),e._UZ(11,"input",4),e.qZA(),e.TgZ(12,"label"),e._uU(13,"Quantity:"),e.qZA(),e._UZ(14,"greg-dice-rolled-form",5),e.qZA(),e.TgZ(15,"div",6)(16,"label"),e._uU(17,"Chance Of:"),e.qZA(),e.TgZ(18,"span"),e._UZ(19,"input",7),e.qZA(),e.TgZ(20,"label"),e._uU(21,"...on:"),e.qZA(),e._UZ(22,"greg-dice-rolled-form",8),e.TgZ(23,"label"),e._uU(24,"Type:"),e.qZA(),e.TgZ(25,"span")(26,"select",9)(27,"option",10),e._uU(28,"-- Select --"),e.qZA(),e.YNc(29,Xe,2,1,"ng-container",11),e.qZA()()()(),e.TgZ(30,"div")(31,"a",2),e.NdJ("click",function(){return r.removeArticle()}),e._uU(32,"X"),e.qZA()()(),e.YNc(33,Ve,6,3,"section",12)),2&t&&(e.Q6J("formGroup",r.articleForm),e.xp6(14),e.Q6J("fromParentForm",r.articleForm),e.xp6(8),e.Q6J("fromParentForm",r.articleForm),e.xp6(7),e.Q6J("ngIf",r.articleTypeKeys),e.xp6(4),e.Q6J("ngIf",r.showMagicItemList))},dependencies:[m.sg,m.O5,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.sg,s.u,h,m.Ov],styles:["input[type=number][_ngcontent-%COMP%]{width:2em}div.chance-type[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(6,auto);column-gap:.5em}div.name-quantity[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr 3fr);column-gap:.5em;margin-bottom:.2em}div.shift-entry[_ngcontent-%COMP%]{transform:translateY(.6em)}div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:right}form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr 1em;margin-bottom:1em}section.magic-item-list[_ngcontent-%COMP%]   section.saved-magic-items[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(3,1fr)}section.magic-item-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr}section.magic-item-list[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}"]}),n})();function ze(n,o){if(1&n&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.type),e.xp6(1),e.AsE(" ",t.type," (",t.system,") ")}}function et(n,o){if(1&n&&(e.TgZ(0,"select",17)(1,"option",18),e._uU(2,"-- Select --"),e.qZA(),e.YNc(3,ze,2,3,"option",19),e.TgZ(4,"option",20),e._uU(5,"None"),e.qZA()()),2&n){const t=o.ngIf;e.xp6(3),e.Q6J("ngForOf",t)}}function tt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"span"),e._uU(2,"\u2022"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"a",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.resetTreasurePerCapForm(a.value))}),e._uU(6,"\u270e"),e.qZA(),e.TgZ(7,"a",9),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeTreasurePerCap(a))}),e._uU(8,"X"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Oqu(t.value.name?t.value.name:t.value.type)}}function nt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,tt,9,1,"div",22),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.treasurePerCapFormArray.controls)}}function rt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"label"),e._uU(2,"No. in Lair:"),e.qZA(),e._UZ(3,"greg-dice-rolled-form",25),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("fromParentForm",t.monsterTypeForm)}}function ot(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.ynx(1,27),e.TgZ(2,"span"),e._uU(3,"\u2022"),e.qZA(),e.TgZ(4,"label"),e._uU(5,"Chance"),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"input",28),e._uU(8," % "),e.qZA(),e.TgZ(9,"label"),e._uU(10,"No."),e.qZA(),e._UZ(11,"greg-dice-rolled-form",29),e.TgZ(12,"label"),e._uU(13,"Name:"),e.qZA(),e._UZ(14,"input",30),e.TgZ(15,"label"),e._uU(16,"Every..."),e.qZA(),e._UZ(17,"input",31),e.TgZ(18,"a",9),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeConsort(a))}),e._uU(19,"X"),e.qZA(),e.BQk(),e.qZA()}if(2&n){const t=o.index,r=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(10),e.Q6J("diceRolledForm",r.consortQuantityForm(t))}}function it(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ot,20,2,"div",26),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.consortsFormArray.controls)}}function at(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.ynx(1,27),e.TgZ(2,"span"),e._uU(3,"\u2022"),e.qZA(),e.TgZ(4,"label"),e._uU(5,"For Each:"),e.qZA(),e._UZ(6,"input",32),e.TgZ(7,"label"),e._uU(8,"+Chance:"),e.qZA(),e.TgZ(9,"span"),e._UZ(10,"input",33),e._uU(11," % "),e.qZA(),e.TgZ(12,"label"),e._uU(13,"Name:"),e.qZA(),e.TgZ(14,"span"),e._UZ(15,"input",30),e.qZA(),e.TgZ(16,"label"),e._uU(17,"No."),e.qZA(),e._UZ(18,"greg-dice-rolled-form",29),e.TgZ(19,"a",9),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeRetinue(a))}),e._uU(20,"X"),e.qZA(),e.BQk(),e.qZA()}if(2&n){const t=o.index,r=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(17),e.Q6J("diceRolledForm",r.retinueQuantityForm(t))}}function st(n,o){if(1&n&&(e.ynx(0),e.YNc(1,at,21,2,"div",26),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.retinueFormArray.controls)}}function ct(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form",34)(2,"greg-treasure-article-form",35),e.NdJ("removeArticleEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleRemoveArticle(0))})("shiftArticleEvent",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.handleShiftArticle(0,i))}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("articleForm",t.treasurePerCapForm)("enableMagicItemHint",!0)}}function lt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.addTreasurePerCap(a))}),e._uU(2,"+Add"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Oqu(t.type)}}function mt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,lt,5,1,"div",26),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function pt(n,o){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,mt,2,1,"ng-container",5),e.qZA()),2&n){const t=o.ngIf;e.oxw(2);const r=e.MAs(50);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function _t(n,o){if(1&n&&(e.YNc(0,pt,2,2,"div",36),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("ngIf",e.lcZ(1,1,t.treasureType$))}}function gt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addTreasurePerCap())}),e._uU(1," +Add "),e.qZA()}}function ut(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"a",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addConsort(a))}),e._uU(4,"+as Consort"),e.qZA(),e.TgZ(5,"a",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addRetinue(a))}),e._uU(6,"+as Retinue"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}function dt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ut,7,1,"div",26),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function ft(n,o){if(1&n&&(e.TgZ(0,"section",38),e.YNc(1,dt,2,1,"ng-container",5),e.qZA()),2&n){const t=o.ngIf;e.oxw();const r=e.MAs(50);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function Tt(n,o){1&n&&(e.TgZ(0,"section"),e._uU(1,"~"),e.qZA())}let Ct=(()=>{class n{get consortsFormArray(){return this.monsterTypeForm.get("consorts")}consortQuantityForm(t){return this.consortsFormArray.at(t).get("quantity")}get isBx(){return"BX"===this.monsterTypeForm.value.system}get retinueFormArray(){return this.monsterTypeForm.get("retinue")}retinueQuantityForm(t){return this.retinueFormArray.at(t).get("quantity")}get treasurePerCapFormArray(){return this.monsterTypeForm.get("treasurePerCap")}constructor(t){this.dataService=t,this.PERSISTENCE_TYPE=g.$.monsterType,this.treasurePerCapType="i"}ngOnInit(){this.savedMonsterList$=this.dataService.dataState$.pipe((0,u.U)(t=>t.monsterEncounterLists)),this.treasureType$=this.dataService.dataState$.pipe((0,u.U)(t=>t.treasureTypes)),this.resetForm(),this.resetTreasurePerCapForm()}addConsort(t){const r=new U({system:this.monsterTypeForm.value.system});(0,_.gK)(t)&&(r.name=t.name),this.consortsFormArray.push(l(r))}addRetinue(t){const r=new q({system:this.monsterTypeForm.value.system});(0,_.gK)(t)&&(r.name=t.name),this.retinueFormArray.push(l(r))}addTreasurePerCap(t){if(t)this.treasurePerCapFormArray.push(l(new v(t)));else{const r=this.treasurePerCapFormArray.value.findIndex(i=>i.name===this.treasurePerCapForm.value.name);-1!==r?this.treasurePerCapFormArray.at(r).patchValue(l(new y.y(this.treasurePerCapForm.value)).value):this.treasurePerCapFormArray.push(l(new y.y(this.treasurePerCapForm.value)))}this.resetTreasurePerCapForm()}handleEditItemEvent(t){this.resetForm(t)}handleRemoveArticle(t){(0,d._)("Method not implemented.")}handleShiftArticle(t,r){(0,d._)("Method not implemented.")}removeConsort(t){this.consortsFormArray.removeAt(t)}removeRetinue(t){this.retinueFormArray.removeAt(t)}removeTreasurePerCap(t){this.treasurePerCapFormArray.removeAt(t)}resetForm(t){this.monsterTypeForm=l(new F(t))}resetTreasurePerCapForm(t){this.treasurePerCapForm=l(new y.y(t))}togglePerCapitaTreasureType(t){this.treasurePerCapType=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-monster-type"]],decls:51,vars:20,consts:[["quantityLabel","No. Appearing",3,"itemForm","includeSupplementalList","persistenceType","editSavedItemEvent"],[3,"formGroup"],[1,"monster-form"],["formControlName","treasureType",4,"ngIf"],["formControlName","pctInLair","type","number"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"monster-entourage"],["formArrayName","consorts",1,"consorts"],[3,"click"],["formArrayName","retinue",1,"retinue"],[1,"indent"],["typePerCap",""],[1,"per-cap-form-controls"],[3,"click",4,"ngIf"],["class","saved-encounter-lists",4,"ngIf"],["nil",""],["formControlName","treasureType"],["disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["value",""],[3,"value"],["class","treasure-per-cap-entries",4,"ngFor","ngForOf"],[1,"treasure-per-cap-entries"],[1,"edit-pencil",3,"click"],["identifier","quantityInLair",3,"fromParentForm"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","pctChance","type","number"],[3,"diceRolledForm"],["formControlName","name","type","text"],["formControlName","every","type","number"],["formControlName","each","type","number"],["formControlName","incChance","type","number"],[1,"per-cap-treasure-form"],[3,"articleForm","enableMagicItemHint","removeArticleEvent","shiftArticleEvent"],["class","type-per-cap",4,"ngIf"],[1,"type-per-cap"],[1,"saved-encounter-lists"]],template:function(t,r){if(1&t&&(e.TgZ(0,"greg-quantifiable-item-form-template",0),e.NdJ("editSavedItemEvent",function(a){return r.handleEditItemEvent(a)}),e.TgZ(1,"supplemental-fields-form")(2,"form",1)(3,"section",2)(4,"label"),e._uU(5,"Treasure Type:"),e.qZA(),e.YNc(6,et,6,1,"select",3),e.ALo(7,"async"),e.TgZ(8,"label"),e._uU(9,"Chance in Lair:"),e.qZA(),e.TgZ(10,"span"),e._UZ(11,"input",4),e._uU(12," % "),e.qZA(),e.TgZ(13,"label"),e._uU(14,"Per Cap:"),e.qZA(),e.TgZ(15,"div"),e.YNc(16,nt,2,1,"ng-container",5),e.qZA(),e.YNc(17,rt,4,1,"ng-container",6),e.qZA(),e._UZ(18,"hr"),e.TgZ(19,"section",7)(20,"section",8),e.YNc(21,it,2,1,"ng-container",5),e.TgZ(22,"a",9),e.NdJ("click",function(){return r.addConsort()}),e._uU(23,"+Add Consort"),e.qZA()(),e._UZ(24,"hr"),e.TgZ(25,"section",10),e.YNc(26,st,2,1,"ng-container",5),e.TgZ(27,"a",9),e.NdJ("click",function(){return r.addRetinue()}),e._uU(28,"+Add Retinue"),e.qZA()()()()(),e.TgZ(29,"supplemental-lists-form")(30,"nav")(31,"label",11)(32,"a",9),e.NdJ("click",function(){return r.togglePerCapitaTreasureType("i")}),e._uU(33," Add Treasure Per Capita "),e.qZA()(),e.TgZ(34,"label",11)(35,"a",9),e.NdJ("click",function(){return r.togglePerCapitaTreasureType("t")}),e._uU(36," Add Treasure Type Per Capita "),e.qZA()()(),e.YNc(37,ct,3,2,"div",5),e.YNc(38,_t,2,3,"ng-template",null,12,e.W1O),e.TgZ(40,"section",13),e.YNc(41,gt,2,0,"a",14),e.TgZ(42,"a",9),e.NdJ("click",function(){return r.resetTreasurePerCapForm()}),e._uU(43,"Reset"),e.qZA()(),e._UZ(44,"hr"),e.TgZ(45,"label",11),e._uU(46,"Add Encounter List"),e.qZA(),e.YNc(47,ft,2,2,"section",15),e.ALo(48,"async"),e.qZA()(),e.YNc(49,Tt,2,0,"ng-template",null,16,e.W1O)),2&t){const i=e.MAs(39),a=e.MAs(50);e.Q6J("itemForm",r.monsterTypeForm)("includeSupplementalList",!0)("persistenceType",r.PERSISTENCE_TYPE),e.xp6(2),e.Q6J("formGroup",r.monsterTypeForm),e.xp6(4),e.Q6J("ngIf",e.lcZ(7,16,r.treasureType$)),e.xp6(10),e.Q6J("ngIf",r.treasurePerCapFormArray.controls.length)("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",r.isBx),e.xp6(4),e.Q6J("ngIf",r.consortsFormArray.controls.length)("ngIfElse",a),e.xp6(5),e.Q6J("ngIf",r.retinueFormArray.controls.length)("ngIfElse",a),e.xp6(11),e.Q6J("ngIf","i"===r.treasurePerCapType)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf","i"===r.treasurePerCapType),e.xp6(6),e.Q6J("ngIf",e.lcZ(48,18,r.savedMonsterList$))}},dependencies:[m.sg,m.O5,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.F,s.sg,s.u,s.x0,s.CE,h,De,J,m.Ov],styles:["input[type=number][_ngcontent-%COMP%]{width:2em}div.treasure-per-cap-entries[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr repeat(2,1.5em)}div.type-per-cap[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(4,1fr)}div.type-per-cap[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:3em 1fr}hr[_ngcontent-%COMP%]{margin-bottom:1em;margin-top:1em}label.indent[_ngcontent-%COMP%]{padding-left:2em}form.per-cap-treasure-form[_ngcontent-%COMP%]{margin:.5em 0}section.consorts[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;column-gap:1em;grid-template-columns:.5em 2em 4em 1em 1fr 3em 6em 3em 2em 1em;margin-bottom:.25em}section.monster-form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;column-gap:1em;grid-template-columns:repeat(2,1fr 2fr);margin-top:.25em}section.monster-entourage[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{text-align:center}section.per-cap-form-controls[_ngcontent-%COMP%]{text-align:center}section.per-cap-form-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 2em}section.retinue[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;column-gap:.7em;grid-template-columns:.5em 5em 1em 6em 4em 2em 1fr 1em 13em 1em;margin-bottom:.25em}section.saved-encounter-lists[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left}section.saved-encounter-lists[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:smaller;margin-top:auto;padding:0 .5em}section.saved-encounter-lists[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr repeat(2,auto)}"]}),n})();function yt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.nestType(a))}),e._uU(2,"+Nest"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.AsE("",t.type," (",t.system,")")}}function ht(n,o){if(1&n&&(e.TgZ(0,"section",4),e.YNc(1,yt,5,2,"div",5),e.qZA()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function vt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ht,2,1,"section",3),e.BQk()),2&n){const t=o.ngIf;e.oxw();const r=e.MAs(9);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function It(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"No treasure types configured."),e.qZA())}let bt=(()=>{class n{get treasureTypeEntries(){return this.treasureListForm.get("entries")}constructor(t){this.dataService=t,this.PERSISTENCE_TYPE=g.$.treasureList}ngOnInit(){this.resetTreasureListForm(),this.treasureType$=this.dataService.dataState$.pipe((0,u.U)(t=>{const r=t.treasureTypes;return(0,_.L1)(r,"type"),r}))}handleNestSavedTable(t){this.treasureTypeEntries.push(l(new f.b({reference:t.name,persistenceType:this.PERSISTENCE_TYPE})))}handleEditSavedTable(t){this.resetTreasureListForm(t)}handleImport(t){this.handleEditSavedTable(t)}nestType(t){this.treasureTypeEntries.push(l(new f.b({reference:t.type,persistenceType:g.$.treasureType})))}resetTreasureListForm(t){this.treasureListForm=l(new C.X(t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-treasure-list"]],decls:10,vars:5,consts:[["entryIdentifier","reference",3,"persistenceType","tableForm","editSavedTableEvent","importEvent"],[4,"ngIf"],["nil",""],["class","treasure-types",4,"ngIf","ngIfElse"],[1,"treasure-types"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"greg-rollable-table-template",0),e.NdJ("editSavedTableEvent",function(a){return r.handleEditSavedTable(a)})("importEvent",function(a){return r.handleEditSavedTable(a)}),e.TgZ(1,"add-entry-form")(2,"p"),e._uU(3,' This one looks a little wonky. Just assign a bounded range in the Entries table, same as you would for a rolled table, then ignore the "dice pool". '),e.qZA(),e.TgZ(4,"label"),e._uU(5,"Treasure Types"),e.qZA(),e.YNc(6,vt,2,2,"ng-container",1),e.ALo(7,"async"),e.qZA(),e.YNc(8,It,2,0,"ng-template",null,2,e.W1O),e.qZA()),2&t&&(e.Q6J("persistenceType",r.PERSISTENCE_TYPE)("tableForm",r.treasureListForm),e.xp6(6),e.Q6J("ngIf",e.lcZ(7,3,r.treasureType$)))},dependencies:[m.sg,m.O5,Z,m.Ov],styles:["add-entry-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}add-entry-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:smaller;font-style:italic;text-align:center;padding:0 15%}section.treasure-types[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left;row-gap:0}section.treasure-types[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:auto 1fr}section.treasure-types[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:.5em}"]}),n})();var Mt=p(9841);const Zt=["importMapArticlesInput"];function xt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"option",11),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit,r=e.oxw();e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",r.treasureArticleType(t)," ")}}function Et(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.addSavedMapTreasureReference(a))}),e._uU(2,"+"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"a",15),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.editTreasureMapArticleEntry(a))}),e._uU(6,"\u270e"),e.qZA(),e.TgZ(7,"a",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.deleteTreasureMapArticleEntry(a))}),e._uU(8,"X"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,r=e.oxw(2);e.xp6(4),e.AsE(" ",t.name," ( ",r.treasureArticleType(t.type)," ) ")}}function At(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",12),e.YNc(2,Et,9,2,"ng-container",6),e.qZA(),e.TgZ(3,"div",7)(4,"a",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.importMapTreasureArticles())}),e._uU(5,"Import"),e.qZA(),e.TgZ(6,"input",13,14),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onImportMapTreasureArticles())}),e.qZA(),e.TgZ(8,"a",8),e.NdJ("click",function(){const a=e.CHM(t).ngIf,c=e.oxw();return e.KtG(c.exportMapTreasureArticles(a))}),e._uU(9,"Export"),e.qZA(),e.TgZ(10,"a",8),e.NdJ("click",function(){const a=e.CHM(t).ngIf,c=e.oxw();return e.KtG(c.clearMapTreasureArticles(a))}),e._uU(11,"Clear"),e.qZA()(),e.BQk()}if(2&n){const t=o.ngIf,r=e.oxw();e.xp6(2),e.Q6J("ngForOf",t),e.xp6(4),e.MGl("accept",".",r.MAP_TREASURE_ARTICLE,"")}}function Ft(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addMagicItemTable(a))}),e._uU(2,"+Add"),e.qZA(),e.TgZ(3,"span",19)(4,"a",8),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(3);return e.KtG(c.shiftMagicItemTable(a,"up"))}),e._uU(5,"\u21d1"),e.qZA(),e.TgZ(6,"a",8),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(3);return e.KtG(c.shiftMagicItemTable(a,"down"))}),e._uU(7,"\u21d3"),e.qZA()(),e._uU(8),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(8),e.hij(" ",t.name," ")}}function Pt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Ft,9,1,"div",6),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function St(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"No magic items configured."),e.qZA())}function Ot(n,o){if(1&n&&(e.TgZ(0,"section",16),e.YNc(1,Pt,2,1,"ng-container",17),e.YNc(2,St,2,0,"ng-template",null,18,e.W1O),e.qZA()),2&n){const t=o.ngIf,r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}let Nt=(()=>{class n{get treasureArticleTypeKeys(){return Object.keys(this.TREASURE_ARTICLE_TYPES).filter(t=>"GEMS"==t||"JEWELRY"==t||"SPECIE"==t)}treasureArticleType(t){return this.TREASURE_ARTICLE_TYPES[t]}get importMapArticlesInput(){return this.importMapArticlesInputRef.nativeElement}constructor(t){this.dataService=t,this.PERSISTENCE_TYPE=g.$.treasureMap,this.MAP_TREASURE_ARTICLE=g.$.treasureMapRef,this.PERSISTENCE_TYPES=g.$,this.TREASURE_ARTICLE_TYPES=M.U}ngOnInit(){this.treasureMapForm=l(new C.X),this.magicItemTableList$=this.dataService.dataState$.pipe((0,u.U)(t=>t.magicItemTables)),this.treasureMapList$=this.dataService.dataState$.pipe((0,u.U)(t=>t.treasureMaps)),this.treasureMapRefList$=this.dataService.dataState$.pipe((0,u.U)(t=>t.treasureMapRefs)),this.treasureMapRefList$=(0,Mt.a)([this.dataService.dataState$.pipe((0,u.U)(t=>t.treasureMapRefs)),this.treasureMapForm.valueChanges]).pipe((0,u.U)(([t,r])=>t.filter(i=>this.filterMapRefListPredicate(i,new C.X(r))))),this.resetTreasureArticleForm()}addMagicItemTable(t){this.treasureMapForm.get("entries").push(l(new f.b({reference:t.name,persistenceType:this.PERSISTENCE_TYPES.magicItemTable})))}addSavedMapTreasureReference(t){this.treasureMapForm.get("entries").push(l(new f.b({reference:t.name,persistenceType:this.MAP_TREASURE_ARTICLE})))}clearMapTreasureArticles(t){for(const r of t)this.dataService.delete(r,this.MAP_TREASURE_ARTICLE)}deleteTreasureMapArticleEntry(t){this.dataService.delete(t,this.MAP_TREASURE_ARTICLE)}editTreasureMapArticleEntry(t){this.treasureArticleForm=l(new y.y(t))}exportMapTreasureArticles(t){this.dataService.exportObject(t,this.treasureMapForm.value.system+"-"+this.treasureMapForm.value.name,this.MAP_TREASURE_ARTICLE.toUpperCase())}handleEditSavedTable(t){this.treasureMapForm=l(new C.X(t))}handleImport(t){this.treasureMapForm=l(new C.X(t))}handleNestSavedTable(t){this.treasureMapForm.get("entries").push(l(new f.b({reference:t.name,persistenceType:this.PERSISTENCE_TYPES.treasureMap})))}importMapTreasureArticles(){this.importMapArticlesInput.click()}onImportMapTreasureArticles(){this.importMapArticlesInput.files?.length&&this.dataService.import(this.importMapArticlesInput.files[0],this.MAP_TREASURE_ARTICLE)}resetTreasureArticleForm(){this.treasureArticleForm=l(new y.y({type:"SPECIE"}))}saveMapTreasureArticle(){this.dataService.persist(this.MAP_TREASURE_ARTICLE,{...this.treasureArticleForm.value,name:this.buildActiveMapTreasureArticleName()}),this.resetTreasureArticleForm()}shiftMagicItemTable(t,r){this.dataService.shiftListEntry(this.PERSISTENCE_TYPES.magicItemTable,t,r)}buildActiveMapTreasureArticleName(){return[this.treasureMapForm.value.system,this.treasureMapForm.value.name,this.treasureArticleForm.value.name].join("-")}filterMapRefListPredicate(t,r){return(0,_.xb)(r.system)||t.name.includes(r.system)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-treasure-map"]],viewQuery:function(t,r){if(1&t&&e.Gf(Zt,5),2&t){let i;e.iGM(i=e.CRH())&&(r.importMapArticlesInputRef=i.first)}},decls:29,vars:11,consts:[["entryIdentifier","reference",3,"persistenceType","tableForm","editSavedTableEvent","importEvent","nestSavedTable"],[1,"add-treasure-article"],[3,"formGroup"],["identifier","quantity",3,"fromParentForm"],["formControlName","name","type","text"],["formControlName","type"],[4,"ngFor","ngForOf"],[1,"map-articles-controls"],[3,"click"],[4,"ngIf"],["class","add-magic-item",4,"ngIf"],[3,"value"],[1,"map-articles-list"],["type","file",3,"accept","change"],["importMapArticlesInput",""],[1,"edit-pencil",3,"click"],[1,"add-magic-item"],[4,"ngIf","ngIfElse"],["noItems",""],[1,"shift-entry"]],template:function(t,r){1&t&&(e.TgZ(0,"greg-rollable-table-template",0),e.NdJ("editSavedTableEvent",function(a){return r.handleEditSavedTable(a)})("importEvent",function(a){return r.handleImport(a)})("nestSavedTable",function(a){return r.handleNestSavedTable(a)}),e.TgZ(1,"add-entry-form")(2,"label"),e._uU(3,"Add Treasure Article"),e.qZA(),e.TgZ(4,"section",1)(5,"form",2)(6,"label"),e._uU(7,"Number"),e.qZA(),e.TgZ(8,"label"),e._uU(9,"Article"),e.qZA(),e.TgZ(10,"label"),e._uU(11,"Article Type"),e.qZA(),e._UZ(12,"greg-dice-rolled-form",3)(13,"input",4),e.TgZ(14,"span")(15,"select",5),e.YNc(16,xt,3,2,"ng-container",6),e.qZA()()(),e.TgZ(17,"div",7)(18,"a",8),e.NdJ("click",function(){return r.saveMapTreasureArticle()}),e._uU(19,"+Add"),e.qZA(),e.TgZ(20,"a",8),e.NdJ("click",function(){return r.resetTreasureArticleForm()}),e._uU(21,"Reset"),e.qZA()(),e.YNc(22,At,12,2,"ng-container",9),e.ALo(23,"async"),e.qZA(),e._UZ(24,"hr"),e.TgZ(25,"label"),e._uU(26,"Add Magic Item Table"),e.qZA(),e.YNc(27,Ot,4,2,"section",10),e.ALo(28,"async"),e.qZA()()),2&t&&(e.Q6J("persistenceType",r.PERSISTENCE_TYPE)("tableForm",r.treasureMapForm),e.xp6(5),e.Q6J("formGroup",r.treasureArticleForm),e.xp6(7),e.Q6J("fromParentForm",r.treasureArticleForm),e.xp6(4),e.Q6J("ngForOf",r.treasureArticleTypeKeys),e.xp6(6),e.Q6J("ngIf",e.lcZ(23,7,r.treasureMapRefList$)),e.xp6(5),e.Q6J("ngIf",e.lcZ(28,9,r.magicItemTableList$)))},dependencies:[m.sg,m.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,h,Z,m.Ov],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden;position:absolute}input[type=number][_ngcontent-%COMP%]{width:2em}add-entry-form[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{margin-bottom:1em;margin-top:1em}add-entry-form[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{padding-left:2em}section.add-magic-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:2.5em 1.5em 1fr;margin-bottom:.5em}section.add-treasure-article[_ngcontent-%COMP%]   div.map-articles-controls[_ngcontent-%COMP%]{text-align:center}section.add-treasure-article[_ngcontent-%COMP%]   div.map-articles-controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 2em}section.add-treasure-article[_ngcontent-%COMP%]   div.map-articles-list[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1.5em 1fr 1.5em 1.5em}section.add-treasure-article[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr 1.5fr 1fr;column-gap:.5em;margin-bottom:.5em}"]}),n})();const wt=["treasureTypeImport"],Ut=["treasureTypeListImport"];function qt(n,o){if(1&n&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&n){const t=o.$implicit,r=e.oxw(2);e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",r.supportedSystem(t)," ")}}function Jt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,qt,2,2,"option",18),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.supportedSystems)}}function kt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"section",6),e.ynx(1,20),e.TgZ(2,"greg-treasure-article-form",21),e.NdJ("removeArticleEvent",function(){const a=e.CHM(t).index,c=e.oxw();return e.KtG(c.handleRemoveArticle(a))})("shiftArticleEvent",function(i){const c=e.CHM(t).index,Wt=e.oxw();return e.KtG(Wt.handleShiftArticle(c,i))}),e.qZA(),e.BQk(),e.qZA()}if(2&n){const t=o.$implicit,r=o.index;e.xp6(1),e.Q6J("formGroupName",r),e.xp6(1),e.Q6J("articleForm",t)}}function Rt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"a",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addReferenceTable(a))}),e._uU(2,"+Add"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Oqu(t.name)}}function Lt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Rt,5,1,"div",24),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Qt(n,o){if(1&n&&(e.TgZ(0,"section",22),e.YNc(1,Lt,2,1,"ng-container",23),e.qZA()),2&n){const t=o.ngIf;e.oxw();const r=e.MAs(52);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function Yt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"a",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.editTreasureType(a))}),e._uU(2,"\u270e"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"a",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.deleteTreasureType(a))}),e._uU(6,"X"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(4),e.AsE("",t.type," ( ",t.system," )")}}function Gt(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Yt,7,2,"div",26),e.BQk()),2&n){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function $t(n,o){if(1&n&&(e.TgZ(0,"section",25),e.YNc(1,Gt,2,1,"ng-container",23),e.qZA()),2&n){const t=o.ngIf;e.oxw();const r=e.MAs(52);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",r)}}function Kt(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"None currently configured."),e.qZA())}let Ht=(()=>{class n{get articleTypeKeys(){return Object.keys(M.U).map(t=>t)}articleValue(t){return M.U[t]}get articlesFormArray(){return this.treasureTypeForm.get("entries")}supportedSystem(t){return b.B[t]}get supportedSystems(){return Object.keys(b.B).map(t=>t)}get treasureTypeImport(){return this.treasureTypeImportRef.nativeElement}get treasureTypeListImport(){return this.treasureTypeListImportRef.nativeElement}constructor(t){this.dataService=t,this.PERSISTENCE_TYPES=g.$,this.TREASURE_TYPE=g.$.treasureType.toUpperCase()}ngOnInit(){this.treasureTypeForm=l(new v),this.magicItemTableList$=this.dataService.dataState$.pipe((0,u.U)(t=>[...t.magicItemTables,...t.treasureMaps])),this.treasureTypes$=this.dataService.dataState$.pipe((0,u.U)(t=>{const r=t.treasureTypes.map(i=>new v(i));return(0,_.L1)(r,"type"),r}))}addReferenceTable(t){this.articlesFormArray.push(l(new y.y({name:t.name,quantity:1})))}addTreasureArticle(){this.articlesFormArray.push(l(new y.y))}clearTreasureTypeList(){this.dataService.clear(this.PERSISTENCE_TYPES.treasureType)}clearTreasureTypeForm(){this.treasureTypeForm=l(new v)}deleteTreasureType(t){this.dataService.delete(t,this.PERSISTENCE_TYPES.treasureType)}editTreasureType(t){this.treasureTypeForm=l(new v(t))}exportTreasureType(){this.dataService.exportObject(this.treasureTypeForm.value,"".concat(this.treasureTypeForm.value.system,"-",this.treasureTypeForm.value.type),`.${this.TREASURE_TYPE}`)}exportTreasureTypeList(){this.dataService.exportFromStorage(this.PERSISTENCE_TYPES.treasureType)}handleRemoveArticle(t){this.articlesFormArray.removeAt(t)}handleShiftArticle(t,r){x(t,r,this.articlesFormArray)}importTreasureType(){this.treasureTypeImport.click()}importTreasureTypeList(){this.treasureTypeListImport.click()}onTreasureTypeImport(){this.treasureTypeImport.files?.length?this.dataService.import(this.treasureTypeImport.files[0]).subscribe(t=>{this.treasureTypeForm=l(new v(t)),this.treasureTypeImport.value=""}):(0,d._)("No treasure type import file found.")}onTreasureTypeListImport(){this.treasureTypeListImport.files?.length?(this.dataService.import(this.treasureTypeListImport.files[0],this.PERSISTENCE_TYPES.treasureType),this.treasureTypeListImport.value=""):(0,d._)("No treasure type import file found.")}saveTreasureType(){this.dataService.persist(this.PERSISTENCE_TYPES.treasureType,this.treasureTypeForm.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-treasure-type"]],viewQuery:function(t,r){if(1&t&&(e.Gf(wt,5),e.Gf(Ut,5)),2&t){let i;e.iGM(i=e.CRH())&&(r.treasureTypeImportRef=i.first),e.iGM(i=e.CRH())&&(r.treasureTypeListImportRef=i.first)}},decls:53,vars:10,consts:[[3,"formGroup"],[1,"type-definition"],["formControlName","type","type","text"],["formControlName","system"],["disabled","","value",""],[4,"ngIf"],[1,"articles"],["formArrayName","entries"],["class","articles",4,"ngFor","ngForOf"],[1,"type-controls"],[3,"click"],["type","file",3,"accept","change"],["treasureTypeImport",""],["class","magic-item-tables",4,"ngIf"],["class","saved-treasure-types",4,"ngIf"],["accept",".GREG-CONFIG","type","file",3,"change"],["treasureTypeListImport",""],["noneSaved",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"formGroupName"],[3,"articleForm","removeArticleEvent","shiftArticleEvent"],[1,"magic-item-tables"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"saved-treasure-types"],["class","treasure-list",4,"ngFor","ngForOf"],[1,"treasure-list"]],template:function(t,r){1&t&&(e.TgZ(0,"greg-page-template")(1,"first-content")(2,"form",0)(3,"section",1)(4,"span")(5,"label"),e._uU(6,"Type:"),e.qZA(),e._UZ(7,"input",2),e.qZA(),e.TgZ(8,"span")(9,"label"),e._uU(10,"System:"),e.qZA(),e.TgZ(11,"select",3)(12,"option",4),e._uU(13,"-- Select --"),e.qZA(),e.YNc(14,Jt,2,1,"ng-container",5),e.qZA()()(),e.TgZ(15,"label",6),e._uU(16,"Articles"),e.qZA(),e.ynx(17,7),e.YNc(18,kt,3,2,"section",8),e.BQk(),e.qZA(),e.TgZ(19,"section",9)(20,"a",10),e.NdJ("click",function(){return r.addTreasureArticle()}),e._uU(21,"+ Add Treasure Article"),e.qZA(),e._UZ(22,"hr"),e.TgZ(23,"a",10),e.NdJ("click",function(){return r.saveTreasureType()}),e._uU(24,"Save Treasure Type"),e.qZA(),e.TgZ(25,"a",10),e.NdJ("click",function(){return r.importTreasureType()}),e._uU(26,"Import Treasure Type"),e.qZA(),e.TgZ(27,"input",11,12),e.NdJ("change",function(){return r.onTreasureTypeImport()}),e.qZA(),e.TgZ(29,"a",10),e.NdJ("click",function(){return r.exportTreasureType()}),e._uU(30,"Export Treasure Type"),e.qZA(),e.TgZ(31,"a",10),e.NdJ("click",function(){return r.clearTreasureTypeForm()}),e._uU(32,"Clear Form"),e.qZA()()(),e.TgZ(33,"second-content")(34,"label"),e._uU(35,"Magic Item Tables"),e.qZA(),e.YNc(36,Qt,2,2,"section",13),e.ALo(37,"async"),e.TgZ(38,"label"),e._uU(39,"Saved Types"),e.qZA(),e.YNc(40,$t,2,2,"section",14),e.ALo(41,"async"),e.TgZ(42,"section",9)(43,"a",10),e.NdJ("click",function(){return r.importTreasureTypeList()}),e._uU(44,"Import List"),e.qZA(),e.TgZ(45,"input",15,16),e.NdJ("change",function(){return r.onTreasureTypeListImport()}),e.qZA(),e.TgZ(47,"a",10),e.NdJ("click",function(){return r.exportTreasureTypeList()}),e._uU(48,"Export List"),e.qZA(),e.TgZ(49,"a",10),e.NdJ("click",function(){return r.clearTreasureTypeList()}),e._uU(50,"Clear List"),e.qZA()()()(),e.YNc(51,Kt,2,0,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(2),e.Q6J("formGroup",r.treasureTypeForm),e.xp6(12),e.Q6J("ngIf",r.supportedSystems),e.xp6(4),e.Q6J("ngForOf",r.articlesFormArray.controls),e.xp6(9),e.MGl("accept",".",r.TREASURE_TYPE,""),e.xp6(9),e.Q6J("ngIf",e.lcZ(37,6,r.magicItemTableList$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(41,8,r.treasureTypes$)))},dependencies:[m.sg,m.O5,I.A,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,J,m.Ov],styles:["input[type=file][_ngcontent-%COMP%]{visibility:hidden;position:absolute}input[type=number][_ngcontent-%COMP%]{width:4em}div.reposition[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center}div.treasure-list[_ngcontent-%COMP%]{align-items:center;column-gap:1em;display:grid;grid-template-columns:1em 1fr 1em}first-content[_ngcontent-%COMP%]   section.type-controls[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center;padding:.5em 0}form[_ngcontent-%COMP%]{padding:.5em 0}label.articles[_ngcontent-%COMP%]{padding-left:2em}second-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}second-content[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{margin-bottom:1em}second-content[_ngcontent-%COMP%]   section.type-controls[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(3,1fr);justify-items:center}section.magic-item-tables[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left;max-height:33vh;overflow-y:scroll}section.magic-item-tables[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:3em 1fr}section.saved-treasure-types[_ngcontent-%COMP%]{max-height:33vh;overflow-y:scroll}section.type-definition[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:repeat(2,1fr);text-align:left;margin-bottom:.5em}section.type-definition[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-right:1em}"]}),n})();var Dt=p(1956);class k extends Dt.P{constructor(o){super(o),this.entries=[],this.handleEntries(o)}handleEntries(o){(0,_.gK)(o)&&(0,_.gK)(o.entries)&&this.entries.push(...o.entries.map(t=>new f.b(t)))}}const Bt=[{path:"",component:Q},{path:"magic-item",component:pe},{path:"magic-item-table",component:oe},{path:"monster-entry",component:Ct},{path:"monster-encounter-list",component:Ee},{path:"treasure-list",component:bt},{path:"treasure-map",component:Nt},{path:"treasure-type",component:Ht},{path:"weapon-power",component:(()=>{class n{get formEntries(){return this.weaponPowerForm.get("entries")}constructor(t){this.dataService=t,this.PERSISTENCE_TYPE=g.$.magicWeaponPowerTable,this.PERSISTENCE_TYPES=g.$}ngOnInit(){this.resetWeaponPowerEntryForm(),this.resetWeaponPowerForm()}addEntry(t){t=(0,_.gK)(t)?t:this.weaponPowerEntryForm.value,this.formEntries.push(l(new f.b(t))),this.resetWeaponPowerEntryForm()}handleEditSavedTable(t){this.weaponPowerForm=l(new k(t))}handleImport(t){this.handleEditSavedTable(t)}handleNestSavedTable(t){this.addEntry({persistenceType:this.PERSISTENCE_TYPES.magicWeaponPowerTable,reference:t.name})}resetWeaponPowerEntryForm(){this.weaponPowerEntryForm=l(new f.b({persistenceType:this.PERSISTENCE_TYPES.magicWeaponPower}))}resetWeaponPowerForm(){this.weaponPowerForm=l(new k)}saveEntry(){this.dataService.persist(this.PERSISTENCE_TYPES.magicWeaponPower,this.weaponPowerForm.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["greg-configure-weapon-power"]],decls:21,vars:3,consts:[["entryIdentifier","reference",3,"persistenceType","tableForm","editSavedTableEvent","importEvent","nestSavedTable"],[3,"formGroup"],["formControlName","reference","type","text"],[3,"click"],[1,"indented"],[1,"entry-commands"]],template:function(t,r){1&t&&(e.TgZ(0,"greg-rollable-table-template",0),e.NdJ("editSavedTableEvent",function(a){return r.handleEditSavedTable(a)})("importEvent",function(a){return r.handleImport(a)})("nestSavedTable",function(a){return r.handleNestSavedTable(a)}),e.TgZ(1,"add-entry-form")(2,"form",1)(3,"span")(4,"label"),e._uU(5,"Power Description:"),e.qZA(),e._UZ(6,"input",2),e.qZA(),e.TgZ(7,"div")(8,"a",3),e.NdJ("click",function(){return r.addEntry()}),e._uU(9,"+Add"),e.qZA(),e.TgZ(10,"a",3),e.NdJ("click",function(){return r.resetWeaponPowerEntryForm()}),e._uU(11,"Clear"),e.qZA()()(),e._UZ(12,"hr"),e.TgZ(13,"label",4),e._uU(14,"Saved Entries"),e.qZA(),e.TgZ(15,"section")(16,"p"),e._uU(17,"Entries"),e.qZA(),e.TgZ(18,"div",5)(19,"a",3),e.NdJ("click",function(){return r.addEntry()}),e._uU(20,"+Add Entry"),e.qZA()()()()()),2&t&&(e.Q6J("persistenceType",r.PERSISTENCE_TYPE)("tableForm",r.weaponPowerForm),e.xp6(2),e.Q6J("formGroup",r.weaponPowerEntryForm))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,Z],styles:["add-entry-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr;text-align:center}add-entry-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center}add-entry-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 2em}add-entry-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:10em 1fr}.indented[_ngcontent-%COMP%]{padding-left:2em}"]}),n})()}];let Xt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,R.m,S.Bz.forChild(Bt),S.Bz]}),n})()}}]);