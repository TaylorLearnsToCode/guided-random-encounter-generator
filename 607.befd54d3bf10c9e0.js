"use strict";(self.webpackChunkguided_random_encounter_generator=self.webpackChunkguided_random_encounter_generator||[]).push([[607],{607:(rt,N,h)=>{h.r(N),h.d(N,{GenerateModule:()=>nt});var d=h(6895),Z=h(2342),Q=h(4466),_=h(6132),K=h(1546),c=h(4432),D=h(1135),A=h(4004),t=h(8256),S=h(2966),g=h(314),y=h(767),m=h(5042);class b{constructor(){this.d6=new m.K,this.SUPPORTED_SYSTEMS=_.B,this.PERSISTENCE_TYPES=y.$}deriveStockingList(s,e,r,i){if(this.verifyDeriveStockingList(r,i),null==i||(0,c.xb)(i)){const p=s.retrieveAll(y.$.monsterEncounterList).filter(T=>T.system==this.SUPPORTED_SYSTEMS[e]).find(T=>T.name.includes(`Level ${r}`));null!=p?this.stockingList=p:(0,g._)(`Stocking list not found for system ${e}, level ${r}`)}else this.stockingList=s.retrieveReference(i,this.PERSISTENCE_TYPES.monsterEncounterList)}deriveUnguardedTreasureType(s,e,r){const i=r??1,a=s.retrieveAll(this.PERSISTENCE_TYPES.treasureList);for(const o of a)if("Unguarded Treasure"===o.name&&o.system==e)for(const p of o.entries)if((0,c.Kh)(i,p.chanceOf))return void(this.unguardedTreasureType=s.retrieveReference([p.reference,e],p.persistenceType,["type","system"]))}verifyDeriveStockingList(s,e){null==s&&(null==e||(0,c.xb)(e))&&(0,g._)("Either a stocking list reference or a dungeon level is required")}}class I{constructor(s){this.rooms=[],(0,c.EO)(this,s)}}class L{get hasMonster(){return!(0,c.xb)(this.monsters)}get hasTrap(){return!(0,c.xb)(this.trap)}get hasTreasure(){return!(0,c.xb)(this.treasure)}get isEmpty(){return!(this.hasMonster||this.hasTreasure||this.isSpecial||this.hasTrap)}get isSpecial(){return!(0,c.xb)(this.specialFeature)}constructor(s){this.monsters=[],this.specialFeature="",this.trap="",this.treasure=[],(0,c.EO)(this,s)}}function l(...n){let s=0;if(n[0]instanceof m.K||Array.isArray(n))n.forEach(e=>{if(Array.isArray(e))e.forEach(r=>s+=l(r));else for(let r=0;r<e.no;r++)s+=e.multiplier*(W(e)+e.modifier)});else{const{no:e,pips:r,modifier:i,multiplier:a}=n;s+=l(new m.K({no:e,pips:r,modifier:i,multiplier:a}))}return s}function G(n,s){const r=l(void 0===s?new m.K:s);for(const i of n.keys())if(i===r)return" "+n.get(i)+" ";return(0,g._)(`Unable to find list entry for result of ${r}`),""}function W(n){return Math.floor(Math.random()*n.pips)+1}class H{constructor(){this.d100=new m.K({pips:100}),this.PERSISTENCE_TYPES=y.$,this.result=[]}}class E{constructor(s){this.name="",this.quantity=0,(0,c.EO)(this,s)}}class P{constructor(s){this.isLair=!1,this.name="",this.quantity=0,this.treasure=[],this.treasureType="",(0,c.EO)(this,s),this.handleTreasureResults()}handleTreasureResults(){(0,c.xb)(this.treasure)||(this.treasure=this.treasure.map(s=>new E(s)))}}var V=h(1581),u=h(443),z=h(7263);class O{constructor(){this.d100=new m.K({pips:100}),this.TREASURE_ARTICLE_TYPES=z.U}generateSpecie(s){if(l(this.d100)<=s.chanceOf){const e=new E({name:s.name});return e.quantity=l(s.quantity),e}return null}generateTreasureByTreasureType(s){const e=[];for(const r of s.entries)if((0,c.xb)(r.type)){const i=this.generateMagicItem(r);(0,c.gK)(i)&&e.push(...i)}else e.push(...this.generateTreasureByArticleType(r));return e}generateTreasureByArticleType(s){const e=[];switch(this.TREASURE_ARTICLE_TYPES[s.type]){case this.TREASURE_ARTICLE_TYPES.GEMS:this.pushToResults(this.generateGems(s),e);break;case this.TREASURE_ARTICLE_TYPES.JEWELRY:this.pushToResults(this.generateJewelry(s),e);break;case this.TREASURE_ARTICLE_TYPES.MAGIC_ITEM:this.pushToResults(this.generateMagicItem(s),e);break;case this.TREASURE_ARTICLE_TYPES.SPECIE:this.pushToResults(this.generateSpecie(s),e);break;case this.TREASURE_ARTICLE_TYPES.TREASURE_MAP:this.pushToResults(this.generateTreasureMap(s),e);break;default:(0,g._)(`Unsupported type ${s.type}`)}return e}pushToResults(s,e){if(null!=s)if(Array.isArray(s))for(const r of s)this.pushToResults(r,e);else e.push(s)}}class k extends E{constructor(s){super(s),this.results=[],this.massageResults(s)}massageResults(s){void 0!==s&&s.results&&s.results.length&&(this.results=s.results.map(e=>new E(e)))}}var j=h(8265),C=(()=>{return(n=C||(C={})).COPPER="Copper Pieces",n.SILVER="Silver Pieces",n.ELECRTUM="Electrum Pieces",n.GOLD="Gold Pieces",n.PLATINUM="Platinum Pieces",C;var n})();class F extends E{constructor(s){super(),this.denomination=C.GOLD,this.value=0,(0,c.EO)(this,s)}}let X=(()=>{class n{constructor(){this.d6=new m.K,this.d100=new m.K({pips:100}),this.GEM_SEQUENTIAL_VALUE=[10,50,100,500,1e3,5e3,1e4,25e3,5e4,1e5,5e5],this.GEM_VALUE_THRESHOLDS=new Map([[10,10],[25,50],[75,100],[90,500],[100,1e3]])}generateGems(e){if(l(e.diceRolled)<=e.chanceOf){this.gemResult=[];const r=l(e.quantity);let i;this.deriveBumpEvery(r);for(let a=0;a<r;a++)this.nthGem=a+1,i=this.generateGem(),this.addOrIncrementGem(i);return this.gemResult.sort((a,o)=>a.value-o.value),this.gemResult}return null}addOrIncrementGem(e){const r=this.gemResult.findIndex(i=>i.value===e.value);-1==r?this.gemResult.push(e):this.gemResult[r].quantity+=e.quantity}bumpGemValue(e){let r=e;if(r!==this.GEM_SEQUENTIAL_VALUE[this.GEM_SEQUENTIAL_VALUE.length-1]&&1===l(this.d6)){const i=this.GEM_SEQUENTIAL_VALUE.findIndex(a=>a===r)+1;0!=i&&(r=this.GEM_SEQUENTIAL_VALUE[i],r=this.bumpGemValue(r))}return r}checkForBump(e){let r=e;return this.nthGem%this.bumpEvery==0&&(r=this.bumpGemValue(r)),r}deriveBumpEvery(e){this.bumpEvery=e>=50?10:e>=10?5:1}generateGem(){const e=new F({quantity:1,value:this.generateGemValue()});return e.name=`Gem (${e.value} ${e.denomination})`,e}generateGemValue(){const e=l(this.d100);let r=-1;for(const i of this.GEM_VALUE_THRESHOLDS.keys())if(e<=i){r=this.GEM_VALUE_THRESHOLDS.get(i);break}return r=this.checkForBump(r),-1===r&&(0,g._)(`No gem value threshold found for roll ${e}`),r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ee=(()=>{class n{constructor(){this.d100=new m.K({pips:100}),this.JEWELRY_VALUE_THRESHOLDS=new Map([[20,new m.K({multiplier:100,no:3})],[80,new m.K({multiplier:1e3})],[100,new m.K({multiplier:1e3,pips:10})]])}generateJewelry(e){if(l(e.diceRolled)<=e.chanceOf){this.jewelResult=[];const r=l(e.quantity);let i;for(let a=0;a<r;a++)i=this.generateJewel(),this.addOrIncrementJewel(i);return this.jewelResult.sort((a,o)=>a.value-o.value),this.jewelResult}return null}addOrIncrementJewel(e){const r=this.jewelResult.findIndex(i=>i.value===e.value);-1==r?this.jewelResult.push(e):this.jewelResult[r].quantity+=e.quantity}generateJewel(){const e=new F({value:this.generateJewelryValue(),quantity:1});return e.name=`Jewelry (${e.value} ${e.denomination})`,e}generateJewelryValue(){const e=l(this.d100);let r=-1;for(const i of this.JEWELRY_VALUE_THRESHOLDS.keys())if(e<=i){r=l(this.JEWELRY_VALUE_THRESHOLDS.get(i));break}return-1===r&&(0,g._)(`No jewelry value threshold found for roll ${e}`),r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=(()=>{return(n=f||(f={}))[n.LAW=0]="LAW",n[n.NEUTRALITY=1]="NEUTRALITY",n[n.CHAOS=2]="CHAOS",f;var n})();let te=(()=>{class n{constructor(e){this.dataService=e,this.d12=new m.K({pips:12}),this.d100=new m.K({pips:100}),this.SWORD_ALIGNMENTS=new Map([[new u.P({low:1,high:65}),f.LAW],[new u.P({low:66,high:90}),f.NEUTRALITY],[new u.P({low:91,high:100}),f.CHAOS]]),this.SWORD_COMMUNICATION_MODES=new Map([[new u.P({low:1,high:6}),"None"],[new u.P({low:7,high:9}),"Empathy"],[new u.P({low:10,high:11}),"Speech"],[new u.P({low:12,high:12}),"Telepathy"]]),this.SWORD_LANGUAGES_KNOWN=new Map([[new u.P({low:0,high:0}),0],[new u.P({low:1,high:50}),1],[new u.P({low:51,high:70}),2],[new u.P({low:71,high:85}),3],[new u.P({low:86,high:95}),4],[new u.P({low:96,high:99}),5]]),this.SWORD_SPECIAL_PURPOSES=["Slay Magic-Users","Slay Fighting-Men","Defeat Law","Slay Clerics","Slay Monsters","Defeat Chaos"],this.PERSISTENCE_TYPES=y.$}appendSwordCharacteristics(e){let r=e;return r.includes("Sword")&&!r.includes("Map to")&&(this.isSpecialPurpose=l(this.d100)>90,this.swordIntelligence=this.isSpecialPurpose?12:l(this.d12),r+="".concat(this.appendAlignment(),this.appendSpecialPurpose(),this.appendIntelligence(),this.appendEgoism(),this.appendCommunicationMode(),this.appendLanguages(),this.appendPowers(),")")),r}appendAlignment(){let e="";const r=l(this.d100);for(const i of this.SWORD_ALIGNMENTS.keys())if((0,c.Kh)(r,i)){switch(this.swordAlignment=this.SWORD_ALIGNMENTS.get(i),this.SWORD_ALIGNMENTS.get(i)){case f.LAW:e="Lawful";break;case f.NEUTRALITY:e="Neutral";break;case f.CHAOS:e="Chaotic";break;default:(0,g._)(`Unsupported alignment ${this.SWORD_ALIGNMENTS.get(i)?.toString()} encountered`)}break}return(0,c.xb)(e)?"":` (Alignment: ${e}`}appendCommunicationMode(){let e="";if(this.swordIntelligence>6)for(const r of this.SWORD_COMMUNICATION_MODES.keys())if((0,c.Kh)(this.swordIntelligence,r)){e=this.SWORD_COMMUNICATION_MODES.get(r);break}return(0,c.xb)(e)?"":`; Communication Mode: ${e}`}appendEgoism(){let e="";return this.isSpecialPurpose?e="12":this.swordIntelligence>6&&(e=l(this.d12).toString()),(0,c.xb)(e)?"":`; Egoism: ${e}`}appendIntelligence(){return this.swordIntelligence>6?`; Intelligence: ${this.swordIntelligence}`:""}appendLanguages(){if(this.swordIntelligence<10)return"";let e=this.determineSwordLanguages();if(-1===e){e++;for(let r=0;r<2;r++)e+=this.determineSwordLanguages(new m.K({pips:100,modifier:-1}))}return`; Languages Spoken: ${e}`}appendPowers(){const e=[],r=this.dataService.retrieveReference("Primary Powers",this.PERSISTENCE_TYPES.magicWeaponPowerTable),i=this.dataService.retrieveReference("Extraordinary Ability Table",this.PERSISTENCE_TYPES.magicWeaponPowerTable);let a=0;switch(this.swordIntelligence){case 12:a=3,e.push(...this.rollOnWeaponPowerTable(i));break;case 11:a=3,e.push("Read Magic");break;case 10:case 9:a=3;break;case 8:a=2;break;case 7:a=1}return e.push(...this.rollOnWeaponPowerTable(r,a)),e.length?`; Special Powers: ${e.join(", ")}`:""}appendSpecialPurpose(){if(this.isSpecialPurpose){const e=this.SWORD_SPECIAL_PURPOSES[l(new m.K({pips:this.SWORD_SPECIAL_PURPOSES.length,modifier:-1}))];let r="";switch(this.swordAlignment){case f.LAW:r="Paralyze Chaotic Opponents";break;case f.NEUTRALITY:r="+1 to All Saving Throws";break;case f.CHAOS:r="Disintegrate Lawful Opponents";break;default:(0,g._)(`Unsupported alignment ${this.swordAlignment} encountered`)}return`; Special Purpose: ${e} (${r})`}return""}determineSwordLanguages(e){const r=l(e||this.d100);let i=-1;for(const a of this.SWORD_LANGUAGES_KNOWN.keys())if((0,c.Kh)(r,a)){i=this.SWORD_LANGUAGES_KNOWN.get(a);break}return i}rollOnWeaponPowerTable(e,r){r=(0,c.gK)(r)?r:1;const i=[];let a;for(let o=0;o<r;o++){a=l(e.diceToRoll);for(const p of e.entries)if((0,c.Kh)(a,p.chanceOf))switch(p.persistenceType){case this.PERSISTENCE_TYPES.magicWeaponPower:i.push(p.reference);break;case this.PERSISTENCE_TYPES.magicWeaponPowerTable:i.push(...this.rollOnWeaponPowerTable(this.dataService.retrieveReference(p.reference,p.persistenceType)));break;default:(0,g._)(`Unsupported persistence type ${p.persistenceType} encountered`)}}return i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.L))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y=(()=>{class n extends O{constructor(e,r,i,a){super(),this.dataService=e,this.gemsService=r,this.jewelsService=i,this.swordService=a,this.PERSISTENCE_TYPES=y.$,this.decimalPipe=new d.JJ("en-US")}generateGems(e){return this.gemsService.generateGems(e)}generateJewelry(e){return this.jewelsService.generateJewelry(e)}generateMagicItem(e){let r;const i=[],a=this.rollArticleQuantity(e);for(let o=0;o<a;o++)r=this.dataService.retrieveReference(e.name,this.PERSISTENCE_TYPES.magicItemTable),(0,c.gK)(r)||(r=this.dataService.retrieveReference(e.name,this.PERSISTENCE_TYPES.magicItem)),(0,c.gK)(r.entries)?i.push(...this.generateMagicItemFromTable(r).map(p=>this.convertNamedItemToTreasureResult(p))):i.push(this.convertNamedItemToTreasureResult(r));return(0,c.xb)(i)?null:i}generateTreasureMap(e){let r,i;const a=[],o=this.rollArticleQuantity(e);for(let p=0;p<o;p++)r=this.dataService.retrieveReference(e.name,this.PERSISTENCE_TYPES.treasureMap),i=this.generateTreasureMapResult(r),(0,c.gK)(i)&&i?.results&&a.push(new E({name:`Map to ${i.results.map(T=>this.prettyPrintTreasureResult(T)).join(", ")}`,quantity:1}));return(0,c.xb)(a)?null:a}generateTreasureMapResult(e){const r=new k({name:e.name}),i=l(e.diceToRoll);let a;for(const o of e.entries)if((0,c.Kh)(i,o.chanceOf))switch(a=this.dataService.retrieveReference(o.reference,o.persistenceType),o.persistenceType){case this.PERSISTENCE_TYPES.magicItemTable:r.results.push(...this.generateMagicItemFromTable(a).map(T=>this.convertNamedItemToTreasureResult(T)));break;case this.PERSISTENCE_TYPES.treasureArticle:console.warn(`${o.persistenceType} Encountered`);break;case this.PERSISTENCE_TYPES.treasureMap:const p=this.generateTreasureMapResult(a);(0,c.gK)(p)&&p?.results&&r.results.push(...p.results);break;case this.PERSISTENCE_TYPES.treasureMapRef:r.results.push(...this.generateTreasureByArticleType(a));break;default:(0,g._)(`Unsupported type ${o.persistenceType} encountered.`)}return r}convertNamedItemToTreasureResult(e){const r=new E({name:this.swordService.appendSwordCharacteristics(e.name)});return(0,c.gK)(e.quantity)&&(r.quantity=e.quantity.pips?l(e.quantity):e.quantity),r}generateMagicItemFromTable(e){const r=l(e.diceToRoll);let a,i=[];for(const o of e.entries)if((0,c.Kh)(r,o.chanceOf))switch(a=this.dataService.retrieveReference(o.reference,o.persistenceType),!(0,c.gK)(a)&&o.persistenceType===this.PERSISTENCE_TYPES.magicItemTable&&(a=this.dataService.retrieveReference(o.reference,this.PERSISTENCE_TYPES.treasureMap)),(0,c.gK)(a)||(0,g._)(`Unable to find reference for ${o.reference}, type ${o.persistenceType}`),o.persistenceType){case this.PERSISTENCE_TYPES.magicItemTable:i.push(...this.generateMagicItemFromTable(a));break;case this.PERSISTENCE_TYPES.magicItem:i.push(a);break;case this.PERSISTENCE_TYPES.treasureMap:const p=this.generateTreasureMap(a);p&&i.push(...p.map(T=>new j.Z({name:T.name,quantity:T.quantity})));break;default:(0,g._)(`Unsupported item type ${o.persistenceType} encountered.`)}return i}prettyPrintTreasureResult(e){return"".concat(`${this.decimalPipe.transform(e.quantity,"1.0")}`," ",e.name.includes("-")?e.name.split("-")[e.name.split("-").length-1]:e.name)}rollArticleQuantity(e){return(0,c.gK)(e)&&(0,c.gK)(e.quantity)?(0,c.gK)(e.quantity.pips)?l(e.quantity):e.quantity:1}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.L),t.LFG(X),t.LFG(ee),t.LFG(te))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ne=(()=>{class n extends H{constructor(e,r){super(),this.dataService=e,this.treasureService=r}generateEncounterFromList(e,r){this.result=[];const i=l(e.diceToRoll);for(let a of e.entries)(0,c.Kh)(i,a.chanceOf)&&this.result.push(this.generateReferenceEncounter(a));return r||this.squashResult(),this.result}followingHandledAsCustom(e){this.result.push(new P({name:e.name,quantity:l(e.quantity)}))}followingHandledAsReference(e){const r=this.dataService.retrieveReference(e.name,this.PERSISTENCE_TYPES.monsterType);return!!(0,c.gK)(r)&&(this.result.push(this.generateReferenceEncounter(new V.b({chanceOf:new u.P({low:1,high:100}),persistenceType:this.PERSISTENCE_TYPES.monsterType,reference:r.name}))),!0)}followingHandledAsTable(e){const r=this.dataService.retrieveReference(e.name,this.PERSISTENCE_TYPES.monsterEncounterList);if(!(0,c.gK)(r))return!1;const i=this.result;return i.push(...this.generateEncounterFromList(r,!0)),this.result=i,!0}generateReferenceEncounter(e){let r=new P;const i=this.dataService.retrieveReference(e.reference,this.PERSISTENCE_TYPES.monsterType);if((0,c.gK)(i))r.name=i.name,r.quantity=l(i.quantity),r.isLair=l(this.d100)<=i.pctInLair,this.handleTreasure(i,r),this.handleConsorts(i,r),this.handleRetinue(i,r);else{const a=this.dataService.retrieveReference(e.reference,this.PERSISTENCE_TYPES.monsterEncounterList);r=this.generateEncounterFromList(a,!0)[0]}return r}handleConsorts(e,r){if(e.consorts){let i;for(const a of e.consorts){i=0===a.every?1:Math.floor(r.quantity/a.every);for(let o=0;o<i;o++)l(this.d100)<=a.pctChance&&(this.followingHandledAsTable(a)||this.followingHandledAsReference(a)||this.followingHandledAsCustom(a))}}}handleRetinue(e,r){if(e.retinue){let i;for(const a of e.retinue)i=Math.floor(r.quantity/a.each)*a.incChance,l(this.d100)<=i&&(this.followingHandledAsTable(a)||this.followingHandledAsReference(a)||this.followingHandledAsCustom(a))}}handleTreasure(e,r){if(r.treasureType=e.treasureType,r.isLair&&!(0,c.xb)(e.treasureType)){const i=this.dataService.retrieveReference(e.treasureType,this.PERSISTENCE_TYPES.treasureType,"type");r.treasure.push(...this.treasureService.generateTreasureByTreasureType(i))}else if(e.treasurePerCap)for(let i=0;i<r.quantity;i++)for(const a of e.treasurePerCap)l(a.diceRolled)<=a.chanceOf&&r.treasure.push(...this.treasureService.generateTreasureByArticleType(a))}squashResult(){const e=[];let r,i;for(const a of this.result)r=(0,c.ju)(a,e,["name"]),-1===r?e.push(new P(a)):(e[r].quantity+=a.quantity,e[r].treasure.push(...a.treasure),a.isLair&&!e[r].isLair&&(e[r].isLair=!0));for(const a of e)if(!(0,c.xb)(a.treasure)){const o=[];for(const p of a.treasure)i=(0,c.ju)(p,o,["name"]),-1===i?o.push(new E(p)):o[i].quantity+=p.quantity;a.treasure=o}e.reverse(),this.result=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.L),t.LFG(Y))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M=(()=>{class n{constructor(e){this.lbbService=e,this.SUPPORTED_SYSTEMS=_.B}generateEncounterFromList(e){return this.checkAndSetGeneratorService(e.system),this.generatorService.generateEncounterFromList(e)}checkAndSetGeneratorService(e){this.SUPPORTED_SYSTEMS[e]===this.SUPPORTED_SYSTEMS.LBB?this.generatorService=this.lbbService:(0,g._)(`Unsupported system ${e} specified.`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ne))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),re=(()=>{class n extends O{generateGems(e){return(0,g._)("Method not implemented."),[]}generateJewelry(e){return(0,g._)("Method not implemented."),[]}generateMagicItem(e){return(0,g._)("Method not implemented."),[]}generateTreasureMap(e){return(0,g._)("Method not implemented."),[]}generateTreasureMapResult(e){return(0,g._)("Method not implemented."),null}constructor(){super()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),se=(()=>{class n extends O{generateGems(e){return(0,g._)("Method not implemented."),[]}generateJewelry(e){return(0,g._)("Method not implemented."),[]}generateMagicItem(e){return(0,g._)("Method not implemented."),[]}generateTreasureMap(e){return(0,g._)("Method not implemented."),[]}generateTreasureMapResult(e){return(0,g._)("Method not implemented."),null}constructor(){super()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R=(()=>{class n{constructor(e,r,i){this.bxService=e,this.lbbService=r,this.wwwService=i,this.SUPPORTED_SYSTEMS=_.B}generateTreasure(e){return this.checkAndSetGeneratorService(e.system),this.generatorService.generateTreasureByTreasureType(e)}generateTreasureFromTreasureMap(e){this.checkAndSetGeneratorService(e.system);const r=this.generatorService.generateTreasureMapResult(e);return(0,c.gK)(r)?r:new k}checkAndSetGeneratorService(e){switch(this.SUPPORTED_SYSTEMS[e]){case this.SUPPORTED_SYSTEMS.BX:this.generatorService=this.bxService;break;case this.SUPPORTED_SYSTEMS.LBB:this.generatorService=this.lbbService;break;case this.SUPPORTED_SYSTEMS.WWW:this.generatorService=this.wwwService;break;default:(0,g._)(`Unsupported system ${e} specified.`)}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(re),t.LFG(Y),t.LFG(se))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ie=(()=>{class n extends b{constructor(e,r,i){super(),this.dataService=e,this.encounterService=r,this.treasureService=i,this.TARGET_SYSTEM="BX",this.d10=new m.K({pips:10}),this.SAMPLE_ROOM_TRAPS=new Map([[1,"Poison gas: Save vs. Poison or die"],[2,"Fog: Looks like Poison gas, but harmless"],[3,"Pit: Id6 points of damage per 10' fallen"],[4,"Ceiling Block falls: Save vs. Turn to Stone or take Id 10 points of damage"],[5,"Pendulum blade from ceiling: Id8 points of damage"],[6,"Chute: No damage, but slide to the next level down"]]),this.SAMPLE_TREASURE_TRAPS=new Map([[1,"Poison needle: Save vs. Poison or die"],[2,"Spring-fired darts: 1-6 darts hit for 1-4 points of damage each"],[3,"Flash of light: Save vs. Spells or be blinded for Id8 turns"],[4,"Poison snake"],[5,"Spray: Be sprayed with an unknown liquid that attracts Wandering Monsters; double chances for Id6 hours"],[6,"Illusion: Anything; often a monster"]]),this.SAMPLE_SPECIAL_ROOMS=new Map([[1,"Moaning room or corridor"],[2,"Room turns or sinks while the door locks"],[3,"Illusionary stairs or corridor"],[4,"Shifting block to close off corridor"],[5,"Trap door to tunnels"],[6,"Alarm that summons special monster"],[7,"Talking statue"],[8,"Magic pool whose waters have a strange effect"],[9,"Magic gate to another part of the dungeon"],[10,"Flying weapons which attack only if disturbed"]])}generateDungeon(e,r,i){this.deriveStockingList(this.dataService,"LBB",r,i),this.deriveUnguardedTreasureType(this.dataService,this.TARGET_SYSTEM,r);const a=new I;for(let o=0;o<e;o++)a.rooms.push(this.generateRoom());return a}addMonster(e){e.monsters.push(...this.encounterService.generateEncounterFromList(this.stockingList))}addSpecial(e){e.specialFeature=`( Suggestion:${G(this.SAMPLE_SPECIAL_ROOMS,this.d10)})`}addTrap(e){e.trap=`( Suggestion:${G(this.SAMPLE_ROOM_TRAPS)})`}addTreasure(e){e.hasMonster&&this.handleTreasureFromMonster(e),e.treasure.push(...this.treasureService.generateTreasure({...this.unguardedTreasureType,system:"LBB"}))}generateRoom(){const e=new L;switch(l(this.d6)){case 1:case 2:this.addMonster(e);break;case 3:this.addTrap(e);break;case 4:this.addSpecial(e)}return this.handleTreasure(e),e}handleTreasure(e){const r=l(this.d6);e.hasMonster?r<4?this.addTreasure(e):e.monsters.forEach(i=>i.treasure=[]):e.hasMonster&&r<4||(e.hasTrap&&r<3||1===r)&&this.addTreasure(e)}handleTreasureFromMonster(e){if(!e.monsters.some(r=>!(0,c.xb)(r.treasure))){let r;for(const i of e.monsters.filter(a=>!(0,c.xb)(a.treasureType)))if(r=this.dataService.retrieveReference(this.PERSISTENCE_TYPES.treasureType,i.treasureType,"type"),(0,c.gK)(r)?e.treasure.push(...this.treasureService.generateTreasure(r)):console.warn(`Error determining treasure for ${i.name}`),!(0,c.xb)(e.treasure))return}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.L),t.LFG(M),t.LFG(R))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ae=(()=>{class n extends b{constructor(e,r,i){super(),this.dataService=e,this.encounterService=r,this.treasureService=i,this.TARGET_SYSTEM="LBB"}generateDungeon(e,r,i){this.deriveStockingList(this.dataService,this.TARGET_SYSTEM,r,i),this.deriveUnguardedTreasureType(this.dataService,this.TARGET_SYSTEM,r);const a=new I;for(let o=0;o<e;o++)a.rooms.push(this.generateRoom());return a}generateRoom(){const e=new L;return this.handleMonsters(e),this.handleTreasure(e),e}handleMonsters(e){l(this.d6)<3&&e.monsters.push(...this.encounterService.generateEncounterFromList(this.stockingList).map(r=>new P({...r,treasure:[]})))}handleTreasure(e){(e.hasMonster?l(this.d6)<4:l(this.d6)<2)&&e.treasure.push(...this.treasureService.generateTreasure(this.unguardedTreasureType))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.L),t.LFG(M),t.LFG(R))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class U{constructor(){this.d6=new m.K}rollOnList(s){return G(s)}rollOnRange(s,e){const r=void 0===e?l(this.d6):e;for(const i of s.keys())if((0,c.Kh)(r,i))return" "+s.get(i)+" ";return(0,g._)(`Unable to find range entry for result of ${r}`),""}}let q=(()=>{class n extends U{constructor(){super(...arguments),this.DISPOSITION=new Map([[new u.P({low:1,high:1}),"very bad for"],[new u.P({low:2,high:2}),"bad for"],[new u.P({low:3,high:4}),"indifferent to"],[new u.P({low:5,high:5}),"good for"],[new u.P({low:6,high:6}),"very good for"]]),this.TARGET=new Map([[new u.P({low:1,high:2}),"the character or characters"],[new u.P({low:3,high:4}),"the player or players"],[new u.P({low:5,high:6}),"the environment"]]),this.CHARACTER_EFFECTS=new Map([[1,"a power or feature of race or class"],[2,"the character abilities"],[3,"an intangible: time, a biological function, navigation, et al"],[4,"a consumable: rations, torches, ammunition, et al"],[5,"a non-consumable: armor, equipment, et al"],[6,"meta-elements of the character sheet: saving throws, XP, alignment, et al"]]),this.PLAYER_EFFECTS=new Map([[1,"map or directional hints"],[2,"monster or inhabitant hints"],[3,"treasure (or dearth thereof) hints"],[4,"hazard hints: other special rooms, traps, et al"],[5,"non-player character: prisoners, curious ghosts, talking statues, et al"],[6,"an immersion element: a smell, a taste, et al - in homage to the tone"]]),this.ENVIRONMENT_EFFECTS=new Map([[1,"changes to the layout or floor plan"],[2,"changes to the inhabitants, encounters, or frequency or number of either"],[3,"changes to the doors, entries, or exits - locking, unlocking, hiding, showing, et al"],[4,"translocation: one way teleporters, chutes, ladders, et al"],[5,"changes to dungeon hazards: disarming (or arming) traps, slowly flooding the level, et al"],[6,"changes to secret features: revealing or concealing, exposing or sealing, et al"]]),this.DURATION=new Map([[new u.P({low:1,high:2}),"only the immediate"],[new u.P({low:3,high:5}),"the short term"],[new u.P({low:6,high:6}),"the long term"]])}generateSpecialEffect(){const e=l(this.d6);return"Special:".concat(this.rollOnRange(this.DISPOSITION),"the party, targeting",this.rollOnRange(this.TARGET,e),", specifically",this.deriveTargetEffect(e),": the ramifications for which persist for",this.rollOnRange(this.DURATION))}deriveTargetEffect(e){return this.rollOnList(e<3?this.CHARACTER_EFFECTS:e<5?this.PLAYER_EFFECTS:this.ENVIRONMENT_EFFECTS)}}return n.\u0275fac=function(){let s;return function(r){return(s||(s=t.n5z(n)))(r||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J=(()=>{class n extends U{constructor(){super(...arguments),this.TYPE=new Map([[new u.P({low:1,high:1}),"whole room trap (poison gas, closing walls, etc) affecting the whole party"],[new u.P({low:2,high:3}),"small area trap (spike pit, quicksand, etc) affecting a few members of the party"],[new u.P({low:4,high:5}),"single target trap (poison needle, bladed pendulum, most treasure traps)"],[new u.P({low:6,high:6}),"trick"]]),this.SEVERITY=new Map([[new u.P({low:1,high:2}),"annoyance (time tax, translocation, resource loss, et al"],[new u.P({low:3,high:4}),"drain (physical damage, temporary blindness, monster encounter or increased encounter rate, et al)"],[new u.P({low:5,high:6}),"loss (death, permanent ability loss, one-way teleporters, or other game-enders)"]]),this.DEFENSE=new Map([[1,"Death or Poison Save"],[2,"Wand Save"],[3,"Paralysis or Petrification Save"],[4,"Breath Save"],[5,"Magic Save"],[6,"Armor Class"]])}generateTrickOrTrap(){return"A".concat(this.rollOnRange(this.TYPE),"resulting in",this.rollOnRange(this.SEVERITY),"rolled against",this.rollOnList(this.DEFENSE))}}return n.\u0275fac=function(){let s;return function(r){return(s||(s=t.n5z(n)))(r||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oe=(()=>{class n extends b{constructor(e,r,i,a,o){super(),this.dataService=e,this.encounterService=r,this.inspireSpecialService=i,this.inspireTrickOrTrapService=a,this.treasureService=o,this.TARGET_SYSTEM="LBB",this.d8=new m.K({pips:8})}generateDungeon(e,r,i){this.deriveStockingList(this.dataService,this.TARGET_SYSTEM,r,i),this.deriveUnguardedTreasureType(this.dataService,this.TARGET_SYSTEM,r);const a=new I;for(let o=0;o<e;o++)a.rooms.push(this.generateRoom());return a}addMonsters(e){e.monsters.push(...this.encounterService.generateEncounterFromList(this.stockingList))}addSpecial(e){e.specialFeature=this.inspireSpecialService.generateSpecialEffect()}addTrap(e){e.trap=this.inspireTrickOrTrapService.generateTrickOrTrap()}addTreasure(e){e.treasure.push(...this.treasureService.generateTreasure(this.unguardedTreasureType))}generateRoom(){const e=new L;switch(l(this.d8)){case 1:case 2:this.addMonsters(e);break;case 3:this.addTrap(e);break;case 4:this.addSpecial(e)}return this.handleTreasure(e),e}handleTreasure(e){const r=l(this.d8);(e.hasMonster&&r<5||e.hasTrap&&r<4||e.isSpecial&&r<3||1===r)&&this.addTreasure(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.L),t.LFG(M),t.LFG(q),t.LFG(J),t.LFG(R))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ce=(()=>{class n{constructor(e,r,i){this.bxService=e,this.lbbService=r,this.wwwService=i}generateDungeon(e,r,i){return this.verifySystemSet(),this.generatorService.generateDungeon(e,r,i)}setSystemSelection(e){const r=_.B[e];switch(r){case _.B.BX:this.generatorService=this.bxService;break;case _.B.LBB:this.generatorService=this.lbbService;break;case _.B.WWW:this.generatorService=this.wwwService;break;default:(0,g._)(`Unsupported system ${r} detected`)}}verifySystemSet(){(0,c.gK)(this.generatorService)||(0,g._)("System has not been selected: please select a system in order to continue")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ie),t.LFG(ae),t.LFG(oe))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var w=h(4229),v=h(433);function le(n,s){if(1&n&&(t.TgZ(0,"div")(1,"span"),t._uU(2,"\u2022"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&n){const e=s.$implicit;t.xp6(4),t.AsE("",e.quantity," ",e.name,"")}}function ue(n,s){if(1&n&&(t.ynx(0),t.YNc(1,le,5,2,"div",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.treasureResults)}}function pe(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1,"~"),t.qZA())}let x=(()=>{class n{constructor(){this.treasureResults=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-display-treasure-results"]],inputs:{treasureResults:"treasureResults"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nil",""],[4,"ngFor","ngForOf"]],template:function(e,r){if(1&e&&(t.YNc(0,ue,2,1,"ng-container",0),t.YNc(1,pe,2,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",r.treasureResults.length)("ngIfElse",i)}},dependencies:[d.sg,d.O5],styles:["div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr}"]}),n})();function ge(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"Lair?"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.isLair?"Yes":"No")}}function he(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"Carrying:"),t.qZA(),t._UZ(3,"greg-display-treasure-results",5),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("treasureResults",e.treasure)}}function de(n,s){if(1&n&&(t.TgZ(0,"div",3)(1,"label"),t._uU(2,"Encountered:"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.YNc(5,ge,5,1,"ng-container",4),t.YNc(6,he,4,1,"ng-container",4),t.qZA()),2&n){const e=s.$implicit,r=s.first,i=t.oxw(2);t.Q6J("ngClass",i.divClasses),t.xp6(4),t.AsE("",e.quantity," ",e.name,""),t.xp6(1),t.Q6J("ngIf",r&&!i.suppressLair),t.xp6(1),t.Q6J("ngIf",e.treasure&&e.treasure.length)}}function me(n,s){if(1&n&&(t.ynx(0),t.YNc(1,de,7,5,"div",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.encounterResults)}}function fe(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,"~"),t.qZA())}let $=(()=>{class n{constructor(){this.encounterResults=[]}get divClasses(){return this.suppressBottomMargin?[]:["spaced-out"]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-display-encounter-result"]],inputs:{encounterResults:"encounterResults",suppressBottomMargin:"suppressBottomMargin",suppressLair:"suppressLair"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nil",""],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf"],[3,"treasureResults"]],template:function(e,r){if(1&e&&(t.YNc(0,me,2,1,"ng-container",0),t.YNc(1,fe,2,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",r.encounterResults&&r.encounterResults.length)("ngIfElse",i)}},dependencies:[d.mk,d.sg,d.O5,x],styles:["div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr 3fr}div.spaced-out[_ngcontent-%COMP%]{margin-bottom:1em}label[_ngcontent-%COMP%]{padding-left:2em}"]}),n})(),Te=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-display-dungeon-room-property"]],inputs:{label:"label",value:"value"},decls:5,vars:2,template:function(e,r){1&e&&(t.TgZ(0,"div")(1,"label"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(r.label),t.xp6(2),t.Oqu(r.value))},styles:["div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr 3fr}label[_ngcontent-%COMP%]{padding-left:2em}"]}),n})();function _e(n,s){1&n&&(t.TgZ(0,"span",8)(1,"i"),t._uU(2,"Empty"),t.qZA()())}function Se(n,s){if(1&n&&t._UZ(0,"greg-display-encounter-result",9),2&n){const e=t.oxw().$implicit;t.Q6J("encounterResults",e.monsters)("suppressBottomMargin",!0)("suppressLair",!0)}}function ye(n,s){if(1&n&&t._UZ(0,"greg-display-dungeon-room-property",10),2&n){const e=t.oxw().$implicit;t.Q6J("value",e.specialFeature)}}function Ee(n,s){if(1&n&&t._UZ(0,"greg-display-dungeon-room-property",11),2&n){const e=t.oxw().$implicit;t.Q6J("value",e.trap)}}function ve(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"label"),t._uU(2,"Found:"),t.qZA(),t._UZ(3,"greg-display-treasure-results",13),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("treasureResults",e.treasure)}}function Re(n,s){if(1&n&&(t.TgZ(0,"section")(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"div"),t.YNc(4,_e,3,0,"span",3),t.YNc(5,Se,1,3,"greg-display-encounter-result",4),t.YNc(6,ye,1,1,"greg-display-dungeon-room-property",5),t.YNc(7,Ee,1,1,"greg-display-dungeon-room-property",6),t.YNc(8,ve,4,1,"div",7),t.qZA()()),2&n){const e=s.$implicit,r=s.index;t.xp6(2),t.hij("",r+1,"."),t.xp6(2),t.Q6J("ngIf",e.isEmpty),t.xp6(1),t.Q6J("ngIf",e.hasMonster),t.xp6(1),t.Q6J("ngIf",e.isSpecial),t.xp6(1),t.Q6J("ngIf",e.hasTrap),t.xp6(1),t.Q6J("ngIf",e.hasTreasure)}}function we(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Re,9,6,"section",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.dungeonResult.rooms)}}function Pe(n,s){1&n&&(t.TgZ(0,"div",14),t._uU(1,"~"),t.qZA())}let Ce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-display-dungeon-result"]],inputs:{dungeonResult:"dungeonResult"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nil",""],[4,"ngFor","ngForOf"],["class","indented",4,"ngIf"],[3,"encounterResults","suppressBottomMargin","suppressLair",4,"ngIf"],["label","Special",3,"value",4,"ngIf"],["label","Trap",3,"value",4,"ngIf"],["class","treasure",4,"ngIf"],[1,"indented"],[3,"encounterResults","suppressBottomMargin","suppressLair"],["label","Special",3,"value"],["label","Trap",3,"value"],[1,"treasure"],[3,"treasureResults"],[1,"nil"]],template:function(e,r){if(1&e&&(t.YNc(0,we,2,1,"ng-container",0),t.YNc(1,Pe,2,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",r.dungeonResult.rooms.length)("ngIfElse",i)}},dependencies:[d.sg,d.O5,$,x,Te],styles:["div.treasure[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1fr 3fr}div.treasure[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:2em}section[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr;margin-bottom:.5em}.indented[_ngcontent-%COMP%]{padding-left:2em}"]}),n})();function Me(n,s){if(1&n&&(t.TgZ(0,"section"),t._UZ(1,"greg-display-dungeon-result",12),t.qZA()),2&n){const e=s.ngIf;t.xp6(1),t.Q6J("dungeonResult",e)}}function Ae(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"option",13),t._uU(2),t.qZA(),t.BQk()),2&n){const e=s.$implicit,r=t.oxw();t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Oqu(r.supportedSystem(e))}}function be(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"a",2),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(3);return t.KtG(o.useList(a))}),t._uU(2,"+Use"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(4),t.Oqu(e.name)}}function Ie(n,s){if(1&n&&(t.ynx(0),t.YNc(1,be,5,1,"div",7),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function Le(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Ie,2,1,"ng-container",14),t.BQk()),2&n){const e=s.ngIf;t.oxw();const r=t.MAs(37);t.xp6(1),t.Q6J("ngIf",e.length)("ngIfElse",r)}}function Ge(n,s){1&n&&(t.TgZ(0,"section",15),t._uU(1,"~"),t.qZA())}let Oe=(()=>{class n{get supportedSystemKeys(){return Object.keys(_.B)}supportedSystem(e){return _.B[e]}constructor(e,r){this.dataService=e,this.dungeonService=r,this.dungeonLevel=1,this.noRooms=10,this.stockingListRef="",this.system="",this.dungeonResultSource=new D.X(null)}ngOnInit(){this.dungeonResult$=this.dungeonResultSource.asObservable(),this.monsterEncounterList$=this.dataService.dataState$.pipe((0,A.U)(e=>{const r=e.monsterEncounterLists.map(i=>new K.X(i));return(0,c.L1)(r),r}))}clearForm(){alert("Implement this next!")}generateDungeon(){this.dungeonResultSource.next(this.dungeonService.generateDungeon(this.noRooms,this.dungeonLevel,this.stockingListRef))}updateSystemSelection(e){this.dungeonService.setSystemSelection(e.target.value)}useList(e){this.stockingListRef=e.name,e.system&&this.setSystem(e.system)}setSystem(e){this.system=e,this.dungeonService.setSystemSelection(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.L),t.Y36(ce))},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-generate-dungeon"]],decls:38,vars:11,consts:[[4,"ngIf"],[1,"hang-right"],[3,"click"],[1,"config-form"],["type","number",3,"ngModel","ngModelChange"],[3,"value","change"],["value","","disabled",""],[4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[1,"encounter-lists"],[1,"controls"],["nil",""],[3,"dungeonResult"],[3,"value"],[4,"ngIf","ngIfElse"],[1,"nil"]],template:function(e,r){1&e&&(t.TgZ(0,"greg-page-template")(1,"first-content"),t.YNc(2,Me,2,1,"section",0),t.ALo(3,"async"),t.qZA(),t.TgZ(4,"second-content")(5,"span",1)(6,"a",2),t.NdJ("click",function(){return r.clearForm()}),t._uU(7,"Clear Form"),t.qZA()(),t.TgZ(8,"section",3)(9,"label"),t._uU(10,"No. Rooms:"),t.qZA(),t.TgZ(11,"span")(12,"input",4),t.NdJ("ngModelChange",function(a){return r.noRooms=a}),t.qZA()(),t.TgZ(13,"label"),t._uU(14,"System:"),t.qZA(),t.TgZ(15,"span")(16,"select",5),t.NdJ("change",function(a){return r.updateSystemSelection(a)}),t.TgZ(17,"option",6),t._uU(18,"-- Select --"),t.qZA(),t.YNc(19,Ae,3,2,"ng-container",7),t.qZA()(),t.TgZ(20,"label"),t._uU(21,"Dungeon Level:"),t.qZA(),t.TgZ(22,"span")(23,"input",4),t.NdJ("ngModelChange",function(a){return r.dungeonLevel=a}),t.qZA()(),t.TgZ(24,"label"),t._uU(25,"Custom Stocking List?"),t.qZA(),t.TgZ(26,"span")(27,"input",8),t.NdJ("ngModelChange",function(a){return r.stockingListRef=a}),t.qZA()()(),t.TgZ(28,"label"),t._uU(29,"Saved Lists:"),t.qZA(),t.TgZ(30,"div",9),t.YNc(31,Le,2,2,"ng-container",0),t.ALo(32,"async"),t.qZA(),t.TgZ(33,"section",10)(34,"a",2),t.NdJ("click",function(){return r.generateDungeon()}),t._uU(35,"Generate!"),t.qZA()()()(),t.YNc(36,Ge,2,0,"ng-template",null,11,t.W1O)),2&e&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,7,r.dungeonResult$)),t.xp6(10),t.Q6J("ngModel",r.noRooms),t.xp6(4),t.Q6J("value",r.system),t.xp6(3),t.Q6J("ngForOf",r.supportedSystemKeys),t.xp6(4),t.Q6J("ngModel",r.dungeonLevel),t.xp6(4),t.Q6J("ngModel",r.stockingListRef),t.xp6(4),t.Q6J("ngIf",t.lcZ(32,9,r.monsterEncounterList$)))},dependencies:[d.sg,d.O5,w.A,v.YN,v.Kr,v.Fj,v.wV,v.JJ,v.On,Ce,d.Ov],styles:["div.encounter-lists[_ngcontent-%COMP%]{display:grid;row-gap:.4em;border:solid 1px #dd7700;grid-template-columns:repeat(3,1fr);margin:.25em 0;max-height:8em;overflow-y:scroll;padding:.25em}div.encounter-lists[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:3em 1fr}section.config-form[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:auto 1fr}section.config-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 1em}section.controls[_ngcontent-%COMP%]{margin-top:1em;text-align:center}section.nil[_ngcontent-%COMP%]{text-align:center}.hang-right[_ngcontent-%COMP%]{float:right;margin-right:2em}"]}),n})(),xe=(()=>{class n{constructor(e,r){this.specialService=e,this.trapService=r,this.result="~"}clear(){this.result="~"}inspireSpecial(){this.result=this.specialService.generateSpecialEffect()}inspireTrap(){this.result=this.trapService.generateTrickOrTrap()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q),t.Y36(J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-generate-inspiration"]],decls:16,vars:1,consts:[[3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"greg-page-template")(1,"first-content")(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"second-content")(5,"label"),t._uU(6,"Inspire From:"),t.qZA(),t.TgZ(7,"ul")(8,"li")(9,"a",0),t.NdJ("click",function(){return r.inspireSpecial()}),t._uU(10,"Special Room"),t.qZA()(),t.TgZ(11,"li")(12,"a",0),t.NdJ("click",function(){return r.inspireTrap()}),t._uU(13,"Trick or Trap"),t.qZA()()(),t.TgZ(14,"a",0),t.NdJ("click",function(){return r.clear()}),t._uU(15,"Clear"),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",r.result," "))},dependencies:[w.A],styles:["first-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic;padding-left:10%;padding-right:10%}second-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.25em 0}second-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}"]}),n})();var Ne=h(2636);let Ze=(()=>{class n{constructor(){this.pageDisplayMode=Ne.L.SINGLE}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-generate-landing"]],decls:4,vars:1,consts:[[3,"pageDisplayMode"]],template:function(e,r){1&e&&(t.TgZ(0,"greg-page-template",0)(1,"first-content")(2,"pre"),t._uU(3,"                                                                                  .(@#.                 .,.                                                                                             \n                                                                                 /@@@@*  .*#@@@@@@@@#. *@@@@(                                                                                           \n                                                                             .///@@@@@@@@@@%(,.   /@@8*8@@@@@*                                                                                          \n                                                                           ./8@@@@@#@@@@,           /@@@@%8@@*     */,                                                                                  \n                                                                      #@@@@@@%*,@@@88@@#            .%@@8@@@@@@@@@@@@#                                                                                  \n                                                                     ,@@%*.    .@@%  (@@/          ,8@@, #@@/,,,. *@@8                                                                                  \n                                                                     %@@/       /@@%  (@%*        .#8#  (@@(      .%@@,                                                                                 \n                                                                    #@@(      .,/#(,              /(.  *@@(        ,@@%.                                                                                \n                                                                  ,@@@(    ,8@@@@@@@@@@%/              .8*          ,@@%.                                                                               \n                                                             ,8@@, .%@@,  %@@(       ./8@@@/      .(8@@@@@@@%/.    .#@@@@/                                                                              \n                                                             #@@@8. /@@%   ..      ./#/, *8@@,  .%@@#,    .*%@@8.,8@@%,                                                                                 \n                                                             *@@@@@*,8@%         .%@@8@@@%  ..  .*/,/@@@@@@* ,(8%(@@*                                                                                   \n                                                              %@@8@@@@@/         /@@8*(@@@@8%/   #@@@@@*(@@8     (@@*                                                                                   \n                                                              ,8@@..,.            .#@@@8/**/8@@* /@@@@@@@@@8#.  *@@#                                                                                    \n                                                               ,8@@,               ,,      .(%/. (@@(... .,#@@88@@#.                                                                                    \n                                                                .8@@(                        .8@@@@8(@@@@@8..#@@(.                                                                                      \n                                                                  *@@@#.         (@@@@%.     .@@@8,(@@% .%@@@@@/                                                                                        \n                                                                    ,%@@@8.     8@@8@@@@@8#,...*%@@@@@   (@@@@8.                                                                                        \n                                                                       .%@@,   /@@/(@@@@@@@@@@@@@8@@@(   #@@@@(                                                                                         \n                                                                        .%@@(  ,@@#     /@@/      %@@/  *@@@@@/                                                                                         \n                                                                        ,8@@@/  /@@8./@@,.      .8#.   *@@8%@@*                                                                                         \n                                                                     *8@@@8(@@%  .%@@@@@@..*(*,/@@@@@@@@@( *@@(                                                                                         \n                                           ,/8@@@@@@@@@@@@@8#/*,(@@@@@@/.   .%@@(   .8@@@@@@@@@@@@@@8*    .8@@@@@(.                                                                                     \n                                      ,%@@@@@8(*,.. ...,,/(8@@@@@#,           ,@@@(           %8/      .#@@@@@@@@@@@@*      ..,,,,..                                                                    \n                                   .#@@@(                                       ,8@@@@@@@%,        .(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/.                                                             \n                                  /@@@.                                            ,/,.,@@@@* (@@@@@@@@@@@@@@@@@@@@@@#.                *8@@@(                                                           \n                                 #@@/                                              .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%.                      *8@@/                                                         \n                                (@@(                                                ,@@@@@@@@@@@@@@@@@8@@@@8/,.,*                           /@@#                                                        \n                               .@@8.                                                  ,%@@@@@@@@@@@@@@8/     .#@@.                           /@@(                                                       \n                               *@@%                                                      *8@@@@@@@@@*                       */.              .#@@.                                                      \n                               (@@%                       #@@,                              *%@@@@@.        #@@*           /@@@               (@@(                        ,,                            \n                               /@@%                     /@@@@.                                  ..           *,            ,8@@               *@@8                     ,%@@@%                           \n                              *8@@(                 ./8@@@@@@*                                          .%%*               ,8@@(              *@@8                  *%@@@%@@@                           \n                            ,@@@/              *##8@@@@@@@@@@@.                                         ./#.               /@@@@/             (@@#              *#@@@8/. #@@*                           \n                           #@@#.               /@@@@@@@@@@@@@@%.                                    ,%#.                  .%@@@@@@            (@@*        ,/#@@@@8(.   ,@@@*                            \n                         .#@@/                  *@@@@@@@@@@@@@@@%(.                       //.       .##.                 .8@@@@@@@@#,*.      *@@@@##%8@@@@@@%/,      ,8@@#.                             \n                         (@@*                    #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@8,   (@(    .*,.            ,#@@@@@@@@@@@@8*      /@@@%#((/,.           /@@@#                                \n                        *@@(                     (@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/     ,%*     (@@@@@@8#,,#%@@@@@@@@@@@@@@@#     ,%@@8/                *%@@@*                                  \n                        @@8.                     (@@8@@@@@@@@@@@@@@@@@@@@@@@@@@@@8/.   ..  /@8*              .,* /8#/*.  ,@@@@@@@@@(   .%@@@(.               *%@@@/                                     \n                       *@@(                     .#@@,.%@@@@@@@8**%@@@@@@@@@@@@@@/           /*                           (@@@@@@@@# *%@@@(.               /8@@@/.                                       \n                       (@@/                     *@@%   ,@@@@@/      ./@@@@@@@@@8      (@@%.    .%@@@8888%#/,.          *%@@@@@@@@%@@@@/               ,#@@@8*                                           \n                       @@@*                    .@@@.     /@@@@*          .*#@@@%  .,   ..         .*,**/#8@@@88@,      /@@@@@@@@@@8*              .#@@@@(.                                              \n                       %@@/                   .@@@,         #@@(                 /@@%.           %@#            .       (@@@@@@#.             .#@@@@#.                                                  \n                       *@@(                  /@@8,           /@@(           .#%.                *@@#                  ,%@@@8*             .#@@@@%%/                                                     \n                       .@@8.               /@@@/              (@@/          .%(     .,*(@@@@@@@@%........         .(@@@@(             ,8@@@@#. (@@%                                                     \n                        *@@#          .*%@@@8,                .#@@*   .@@@*   #@@@@@@@@@8(/*,,.    .(@@@@@@@@@(/@@@@%,            /@@@@@/.     #@@#                               .#@@@/                \n                       %@@@,      .%@@@@@/                     /@@%                                        *@@@@@,           ,%@@@@8,         .8@@/                            *@@@@@@@(                \n                     *8@@,           (@@(                      ,8@8.                                   *8@@@@*          .(@@@@@(..@@@/        (@@8                           *@@@@/(@@@                 \n                    ,8@@.             @@%.                     ,8@8,            ,@@@8,             *8@@@8*          *@@@@@%,     %@@@%.     ,@@@@,                          %@@@@@@@@@#                 \n                    #@@,              @@8.                 .8@@@@@( *@@#          .#@@@@%*.   .(@@@@8*         *%@@@@8*        .#@@%          ,8@@@#.                   .#@@@@@@@@@/                    \n                   .@@%              .@@%.               .%@@%.           (@@%.       ./8@@@@@@@%,        ,%@@@@8/.            *@@@              *@@@@,             .(@@@@@@@@@8,                       \n                   ,@@(              *@@(               .@@@.                   */   .*8@@@@#.       ,#@@@@8(.   (@@(          /@@#                ,8@@8,         /@@@@88@@@@@@@@@@@%,                  \n                   ,@@(              8@@*               @@8,                   ,*@8@@@@8*      .*#@@@@8(.     .      .         /@@%              ,(8@@@@@8.       8@@#*(@@#/(##,.,(8@@@%.    ..         \n                   .@@8             ,@@%.              *@@#                 ,(@@@@8(.     .*#@@@@8(.        .8@@/ *8@@@@@@@@@@@*%@*          ,%@@@@8%/ *@@@#  /8@@@@@#%@@8.    *(*, /@@@/  /@@@@@/      \n                    (@@,            %@@*               8@@*            ,(8@@@8%,     .*#@@@@8(.                  .%@8@@@@@@/,.8@@@@@@@/.  .#@@@%,        8@@@@@/(.#@@88@@@*     (@@@@@@@8@@@@@@@@@/     \n                    ,@@@           *@@@@(.            .8@8,       ,(8@@@@%*     .*#@@@@8(.                .@@#,        .(@@@8,.*(#%#(@@@@@@@%(          #@@#,8@@@#,@@@##@@@#,*,   8@@@@@@8@@@@@%@8*     \n                     /@@%         .%@@@@%.             8@8, ./#@@@@8#,     .*#@@@@8(.  ,@@@/  .((/   (@@,   (,            *@@@%*       *%@@@@%*        (@@@,   /8@@88@@/ #@@@@8, .8@@(  /@@@%.          \n                      *@@@/       /@@@@@#             .8@@@@@@%/.     .*#@@@@%(.              ,##/   */,. //.         ,,,,,.*%@@@@/        *%@@@@8%@@@@@@#      (@@8           ,8@@@%/**%@@%            \n                      (@@#       .@@@@@@%.      ./#@@@@@%(,       *#@@@@%(.           (@8.*#*            ,#@#       /@@@@@@@@@@8%@@@@(/(%88%(*.,(8@@@8#*%@@@%,  #@@#       ,@@%, .8@@@@@@@@(            \n                     *@@8        #@@@@(@@(/#8@@@@@%(,        ,#8@@@8(,                (@@//8/        ,(#.           ,@@@@@@@8@@8,  /8@@@%##%@@@@8@@@%     *%@@@@@@%   /@#(%@@@(   ,@@@ /(/              \n                    .%@@,         ,8@@.%@@@%(*.         ./%@@@@(,                     /@@8    .#@@.  #@8,            .((*#@@@@@@@#           *@@@8(         *8@@@@,  *8@@@@%/ ./##%@@@8/                \n                    *@@#          .%@@.,8@@,        ,#@@@@%*.                         *8@8         .%%,                   *@@@%   (8*       *@@@%#(.  /#/.   .8@@@/ @@@@@@/ /@@@@@@%*#@@@(              \n                    (@@,           /@@% .8@@/   .#@@@@8,                              ,8@8         /@@/                     #@@@/.#@@@%. .#@@@%,@@@@@#@@@@@#(@@@@@@@@@(.#@@@%@@@,8@@8. (@@@.            \n                    8@@             (@@#  #@@%%@@@#@@@(                               /@@8         @@@.                     /@@@@@, *8@@@@@@/   %@@@@@@@@8@@@@@,  #@@8,  ,8@@@/   *@@@%./@@8.           \n                    (@@@8/           /@@%. ,8@@8. /@@#                                (@@(        ,@@(                      .8@@8@@8. .**,.   .*.@8*.#@@@* %@@#.   #@@@@@@@@(     .8@@#*@@@#            \n                  .8@@@@@@@%          .%@@(  /@@@(8@@,                                (@@*        (@@*                      .8@8,*@@@#  .@@@@@@@@(8@@@@@@@@@@@@@@@@@@8(*,.       (@@@8@@@#.             \n                  8@8,  (@@@@%.       ../@@@%, *@@@@8.                                #@@,       .@@%.                       8@8,  /@@@@@@@/.         ....,,,.                 (@@@@@@@#.               \n                  .%@@@@@8*%@@@@@@@@@@@@#. (@@@@8@@@@*                               .8@@        ,@@#                       .8@8.                                            #@@@@@@8,                  \n                              .,,,..           ,*(8@8.                               *@@#        /@@(                       .@@%.                                            ,@@@(@@8                   \n                                                  %@@*                               /@@*        8@@*                       *@@%                                              /@@@@#.                   \n                                                  /@@#                               #@@.       .8@8,                       #@@#                                                                        \n                                                  .@@%.                             .@@#        .8@8.                       #@@*                                                                        \n                                                   /@@/                             /@@/        ,@@%                       .%@@.                                                                        \n                                                    @@8.                            @@8,        /@@%                       /@@%                                                                         \n                                                    *@@#                           *@@#         #@@(                       (@@,                                                                         \n                                                     (@@(                          8@@*         #@@*                      .8@@                                                                          \n                                                      #@@(                        *@@%          #@@,                      /@@*                                                                          \n                                                       /@@@/                      #@@*          %@@,                      @@8.                                                                          \n                                                        .@@%                     *@@8           %@@,                     (@@/                                                                           \n                                                         @@%                    .8@@.           #@@,                   .(@@#                                                                            \n                                                        ,@@(                   #@@%.            /@@#                  #@@8(                                                                             \n                                                        %@@*                   8@@*             #@@(,,               %@@*                                                                               \n                                                       ,@@#.                .%@@@@8.           #@@(#@@,             /@@(                                                                                \n                                                      .8@8,                /@@%.,8@@.        .8@@* /@@*             @@8,                                                                                \n                                                     .%@@*                /@@(   .%@@(     .#@@%.  (@@,            .@@%.                                                                                \n                                                    ,8@@,                .@@8.     (@@8,  (@@@,   .@@%              8@%.                                                                                \n                                                  (8@@#.                  @@@*       #@@@@@8,     @@8,               ..                                                                                 \n                                                .%@@*                     ,@@#         .,.       ./(*                                                                                                   \n                                                *@@(                      *@@(                                                                                                                          \n                                                (@@,                      8@@*                                                                                                                          \n                                                #@@.                     *@@%                                                                                                                           \n                                                #@@.                    .8@@,                                                                                                                           \n                                                (@@,                   .#@@*                                                                                                                            \n                                                /@@*                  .8@@*                                                                                                                             \n                                                 .                   #@@%.                                                                                                                                                                                                                                                                                                                                      \n    "),t.qZA()()()),2&e&&t.Q6J("pageDisplayMode",r.pageDisplayMode)},dependencies:[w.A],styles:["pre[_ngcontent-%COMP%]{font-size:6px}"]}),n})();var De=h(5662);function ke(n,s){1&n&&(t.TgZ(0,"ng-contanier"),t.Hsn(1),t.qZA())}function Fe(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1,"Click "),t.TgZ(2,"a"),t._uU(3,"Generate!"),t.qZA(),t._uU(4," to generate a result!"),t.qZA())}function Ye(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"span"),t._uU(2,"\u2022"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span")(6,"a",6),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(3);return t.KtG(o.generate(a))}),t._uU(7,"Generate!"),t.qZA()()()}if(2&n){const e=s.$implicit;t.xp6(4),t.AsE("",e.name," ( ",e.system," )")}}function Ue(n,s){if(1&n&&(t.ynx(0),t.YNc(1,Ye,8,2,"div",5),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function qe(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1,"No tables have been configured from which to generate."),t.qZA())}function Je(n,s){if(1&n&&(t.TgZ(0,"section",3),t.YNc(1,Ue,2,1,"ng-container",0),t.YNc(2,qe,2,0,"ng-template",null,4,t.W1O),t.qZA()),2&n){const e=s.ngIf,r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.length)("ngIfElse",r)}}const $e=[[["result-display"]]],Be=["result-display"];let B=(()=>{class n{set persistenceType(e){this._persistenceType=e,this.derivePersistenceTitle()}get persistenceType(){return this._persistenceType}constructor(e){this.dataService=e,this.generateEvent=new t.vpe,this.PERSISTENCE_TYPES=y.$,this.rollableTableList$=this.dataService.dataState$}ngOnInit(){this.initializeRollableTableListStream(),this.hasGenerated=!1}generate(e){this.hasGenerated=!0,this.generateEvent.emit(e)}derivePersistenceTitle(){for(const e of Object.keys(this.PERSISTENCE_TYPES))if(this.PERSISTENCE_TYPES[e]===this.persistenceType){this.persistenceTitle=e+"s";break}}initializeRollableTableListStream(){const e=Object.keys(this.PERSISTENCE_TYPES).find(r=>this.PERSISTENCE_TYPES[r]===this.persistenceType)+"s";this.rollableTableList$=this.dataService.dataState$.pipe((0,A.U)(r=>r[e]))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-generator-page-template"]],inputs:{persistenceType:"persistenceType"},outputs:{generateEvent:"generateEvent"},ngContentSelectors:Be,decls:11,vars:8,consts:[[4,"ngIf","ngIfElse"],["notYet",""],["class","rollable-table-list",4,"ngIf"],[1,"rollable-table-list"],["noList",""],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,r){if(1&e&&(t.F$t($e),t.TgZ(0,"greg-page-template")(1,"first-content"),t.YNc(2,ke,2,0,"ng-contanier",0),t.YNc(3,Fe,5,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(5,"second-content")(6,"label"),t._uU(7),t.ALo(8,"fromCamelCase"),t.qZA(),t.YNc(9,Je,4,2,"section",2),t.ALo(10,"async"),t.qZA()()),2&e){const i=t.MAs(4);t.xp6(2),t.Q6J("ngIf",r.hasGenerated)("ngIfElse",i),t.xp6(5),t.hij(" ",t.lcZ(8,4,r.persistenceTitle)," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(10,6,r.rollableTableList$))}},dependencies:[d.sg,d.O5,w.A,d.Ov,De.O],styles:["first-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-style:italic;font-size:smaller}section.rollable-table-list[_ngcontent-%COMP%]{margin:.3em 0}section.rollable-table-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:1em 1fr 2fr}"]}),n})();function Ke(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"greg-display-treasure-results",4),t.BQk()),2&n){const e=s.ngIf;t.xp6(1),t.Q6J("treasureResults",e)}}function We(n,s){1&n&&(t.TgZ(0,"p",5),t._uU(1,"Click "),t.TgZ(2,"a"),t._uU(3,"Generate"),t.qZA(),t._uU(4," to roll a treasure hoard."),t.qZA())}function He(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"article")(1,"span",5),t._uU(2,"\u2022"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"a",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,o=t.oxw(2);return t.KtG(o.generateTreasure(a))}),t._uU(6,"Generate"),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(4),t.AsE("",e.system,": ",e.type,"")}}function Ve(n,s){if(1&n&&(t.ynx(0),t.YNc(1,He,7,2,"article",6),t.BQk()),2&n){const e=s.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function ze(n,s){1&n&&(t.TgZ(0,"p"),t._uU(1,"No treasure types configured."),t.qZA())}function Xe(n,s){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=s.$implicit,r=t.oxw(2);t.xp6(1),t.AsE(" ",t.xi3(2,2,e.quantity,"1.0")," ",r.prettyName(e.name)," ")}}function et(n,s){if(1&n&&(t.TgZ(0,"result-display")(1,"label"),t._uU(2),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,Xe,3,5,"li",2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.treasureMapResult.name),t.xp6(2),t.Q6J("ngForOf",e.treasureMapResult.results)}}const tt=[{path:"",component:Ze},{path:"dungeon",component:Oe},{path:"inspiration",component:xe},{path:"monster-encounter",component:(()=>{class n{constructor(e){this.encounterService=e,this.PERSISTENCE_TYPE=y.$.monsterEncounterList}handleGenerate(e){this.encounterResults=this.encounterService.generateEncounterFromList(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-generate-monster-encounter"]],decls:3,vars:2,consts:[[3,"persistenceType","generateEvent"],[3,"encounterResults"]],template:function(e,r){1&e&&(t.TgZ(0,"greg-generator-page-template",0),t.NdJ("generateEvent",function(a){return r.handleGenerate(a)}),t.TgZ(1,"result-display"),t._UZ(2,"greg-display-encounter-result",1),t.qZA()()),2&e&&(t.Q6J("persistenceType",r.PERSISTENCE_TYPE),t.xp6(2),t.Q6J("encounterResults",r.encounterResults))},dependencies:[B,$]}),n})()},{path:"treasure-from-type",component:(()=>{class n{constructor(e,r){this.dataService=e,this.treasureGenService=r,this.hoardSource=new D.X([])}ngOnInit(){this.hoard$=this.hoardSource.asObservable(),this.treasureTypeList$=this.dataService.dataState$.pipe((0,A.U)(e=>e.treasureTypes))}generateTreasure(e){this.hoardSource.next(this.treasureGenService.generateTreasure(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.L),t.Y36(R))},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-generate-treasure-from-type"]],decls:14,vars:8,consts:[[4,"ngIf","ngIfElse"],["noHoard",""],[1,"treasure-type-list"],["noTypes",""],[3,"treasureResults"],[1,"centered"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"greg-page-template")(1,"first-content"),t.YNc(2,Ke,2,1,"ng-container",0),t.ALo(3,"async"),t.YNc(4,We,5,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(6,"second-content")(7,"section",2)(8,"label"),t._uU(9,"Treasure Types"),t.qZA(),t.YNc(10,Ve,2,1,"ng-container",0),t.ALo(11,"async"),t.YNc(12,ze,2,0,"ng-template",null,3,t.W1O),t.qZA()()()),2&e){const i=t.MAs(5),a=t.MAs(13);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,r.hoard$))("ngIfElse",i),t.xp6(8),t.Q6J("ngIf",t.lcZ(11,6,r.treasureTypeList$))("ngIfElse",a)}},dependencies:[d.sg,d.O5,w.A,x,d.Ov],styles:["section.treasure-type-list[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{display:grid;row-gap:.4em;grid-template-columns:2em 1fr 2fr;margin:.2em 0}.centered[_ngcontent-%COMP%]{text-align:center}.right[_ngcontent-%COMP%]{text-align:right}"]}),n})()},{path:"treasure-map",component:(()=>{class n{prettyName(e){const r=e.split("-");return r[r.length-1]}constructor(e){this.treasureService=e,this.PERSISTENCE_TYPE=y.$.treasureMap}handleGenerate(e){this.targetMap=e,this.treasureMapResult=this.treasureService.generateTreasureFromTreasureMap(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R))},n.\u0275cmp=t.Xpm({type:n,selectors:[["greg-generate-treasure-map"]],decls:2,vars:2,consts:[[3,"persistenceType","generateEvent"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,r){1&e&&(t.TgZ(0,"greg-generator-page-template",0),t.NdJ("generateEvent",function(a){return r.handleGenerate(a)}),t.YNc(1,et,5,2,"result-display",1),t.qZA()),2&e&&(t.Q6J("persistenceType",r.PERSISTENCE_TYPE),t.xp6(1),t.Q6J("ngIf",r.treasureMapResult))},dependencies:[d.sg,d.O5,B,d.JJ]}),n})()}];let nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,Q.m,Z.Bz.forChild(tt),Z.Bz]}),n})()}}]);